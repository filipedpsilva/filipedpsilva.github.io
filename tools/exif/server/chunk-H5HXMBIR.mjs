import './polyfills.server.mjs';
import{A as ct,B as Nr,C as wr,D as V,E as F,F as zn,G as Ur,H as be,I as dt,J as je,K as Wn,L as ft,M as N,N as k,O as ie,P as Rr,Q as Ae,R as ze,S as w,T as kr,U as ht,V as Ht,W as We,X as Xn,Y as Zn,_ as Lr,a as Ir,b as Be,c as xr,ca as Br,d as lt,e as _r,f as Tr,fa as Gr,g as br,ga as $n,h as Ar,ha as Vr,i as Fr,j as Dr,ja as Hr,k as Pr,ka as jr,l as Bt,la as zr,m as Gt,ma as Wr,n as Vt,na as Xr,o as xe,p as Ge,q as _e,qa as Zr,r as Te,s as Ve,t as He,u as ne,v as Hn,w as vr,wa as $r,x as Or,y as Mr,z as jn}from"./chunk-LZMBESBO.mjs";import{a as H,b as Z,c as Vn,h as S,l}from"./chunk-4E2Y37IT.mjs";l();l();l();l();l();function Yn(t){return Array.isArray(t)?t:[t]}l();var Kn;try{Kn=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Kn=!1}var Yr=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?zr(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Kn)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(Te(Nr))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kr=new Set,Fe,Ra=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):La}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&ka(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(Te(Yr),Te(wr,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ka(t,e){if(!Kr.has(t))try{Fe||(Fe=document.createElement("style"),e&&Fe.setAttribute("nonce",e),Fe.setAttribute("type","text/css"),document.head.appendChild(Fe)),Fe.sheet&&(Fe.sheet.insertRule(`@media ${t} {body{ }}`,0),Kr.add(t))}catch(n){console.error(n)}}function La(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var qr=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Be}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Jr(Yn(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=Jr(Yn(i)).map(a=>this._registerQuery(a).observable),o=_r(s);return o=Tr(o.pipe(Fr(1)),o.pipe(Dr(1),Ar(0))),o.pipe(lt(a=>{let u={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:d})=>{u.matches=u.matches||c,u.breakpoints[d]=c}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new Ir(a=>{let u=c=>this._zone.run(()=>a.next(c));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(Pr(r),lt(({matches:a})=>({query:i,matches:a})),Bt(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(Te(Ra),Te(Ur))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jr(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var $={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};l();l();var as=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(F(zn),F(jn))},e.\u0275dir=ne({type:e});let t=e;return t})(),Ga=(()=>{let e=class e extends as{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Mr(e)))(s||e)}})(),e.\u0275dir=ne({type:e,features:[be]});let t=e;return t})(),us=new _e("");var Va={provide:us,useExisting:Vt(()=>qt),multi:!0};function Ha(){let t=$n()?$n().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var ja=new _e(""),qt=(()=>{let e=class e extends as{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Ha())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(F(zn),F(jn),F(ja,8))},e.\u0275dir=ne({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&Ae("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Ht([Va]),be]});let t=e;return t})();var ls=new _e(""),cs=new _e("");function ds(t){return t!=null}function fs(t){return Lr(t)?xr(t):t}function hs(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function ps(t,e){return e.map(n=>n(t))}function za(t){return!t.validate}function gs(t){return t.map(e=>za(e)?e:n=>e.validate(n))}function Wa(t){if(!t)return null;let e=t.filter(ds);return e.length==0?null:function(n){return hs(ps(n,e))}}function ms(t){return t!=null?Wa(gs(t)):null}function Xa(t){if(!t)return null;let e=t.filter(ds);return e.length==0?null:function(n){let i=ps(n,e).map(fs);return br(i).pipe(lt(hs))}}function Ss(t){return t!=null?Xa(gs(t)):null}function Qr(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ys(t){return t._rawValidators}function Cs(t){return t._rawAsyncValidators}function Jn(t){return t?Array.isArray(t)?t:[t]:[]}function Wt(t,e){return Array.isArray(t)?t.includes(e):t===e}function es(t,e){let n=Jn(e);return Jn(t).forEach(r=>{Wt(n,r)||n.push(r)}),n}function ts(t,e){return Jn(e).filter(n=>!Wt(t,n))}var Xt=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ms(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ss(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},$e=class extends Xt{get formDirective(){return null}get path(){return null}},Ct=class extends Xt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zt=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Za={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Np=Z(H({},Za),{"[class.ng-submitted]":"isSubmitted"}),Es=(()=>{let e=class e extends Zt{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(F(Ct,2))},e.\u0275dir=ne({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Wn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[be]});let t=e;return t})(),Is=(()=>{let e=class e extends Zt{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(F($e,10))},e.\u0275dir=ne({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Wn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[be]});let t=e;return t})();var gt="VALID",jt="INVALID",Xe="PENDING",mt="DISABLED",de=class{},$t=class extends de{constructor(e,n){super(),this.value=e,this.source=n}},St=class extends de{constructor(e,n){super(),this.pristine=e,this.source=n}},yt=class extends de{constructor(e,n){super(),this.touched=e,this.source=n}},Ze=class extends de{constructor(e,n){super(),this.status=e,this.source=n}},qn=class extends de{constructor(e){super(),this.source=e}},Qn=class extends de{constructor(e){super(),this.source=e}};function ni(t){return(Qt(t)?t.validators:t)||null}function $a(t){return Array.isArray(t)?ms(t):t||null}function ii(t,e){return(Qt(e)?e.asyncValidators:t)||null}function Ya(t){return Array.isArray(t)?Ss(t):t||null}function Qt(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function xs(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new Gt(1e3,"");if(!i[n])throw new Gt(1001,"")}function _s(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new Gt(1002,"")})}var Ye=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Be,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gt}get invalid(){return this.status===jt}get pending(){return this.status==Xe}get disabled(){return this.status===mt}get enabled(){return this.status!==mt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(es(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(es(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ts(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ts(e,this._rawAsyncValidators))}hasValidator(e){return Wt(this._rawValidators,e)}hasAsyncValidator(e){return Wt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(H({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new yt(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new yt(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(H({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new St(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new St(!0,i))}markAsPending(e={}){this.status=Xe;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ze(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=mt,this.errors=null,this._forEachChild(r=>{r.disable(Z(H({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $t(this.value,i)),this._events.next(new Ze(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=gt,this._forEachChild(i=>{i.enable(Z(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gt||this.status===Xe)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $t(this.value,n)),this._events.next(new Ze(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mt:gt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Xe,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let i=fs(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Ze(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?mt:this.errors?jt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xe)?Xe:this._anyControlsHaveStatus(jt)?jt:gt}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new St(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new yt(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qt(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$a(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ya(this._rawAsyncValidators)}},Yt=class extends Ye{constructor(e,n,i){super(ni(n),ii(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){_s(this,!0,e),Object.keys(e).forEach(i=>{xs(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ei=class extends Yt{};var ri=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>en}),en="always";function Ka(t,e){return[...e.path,t]}function ns(t,e,n=en){si(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),qa(t,e),eu(t,e),Qa(t,e),Ja(t,e)}function is(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Jt(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Kt(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Ja(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function si(t,e){let n=ys(t);e.validator!==null?t.setValidators(Qr(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=Cs(t);e.asyncValidator!==null?t.setAsyncValidators(Qr(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Kt(e._rawValidators,r),Kt(e._rawAsyncValidators,r)}function Jt(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=ys(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=Cs(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Kt(e._rawValidators,i),Kt(e._rawAsyncValidators,i),n}function qa(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Ts(t,e)})}function Qa(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Ts(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Ts(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function eu(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function tu(t,e){t==null,si(t,e)}function nu(t,e){return Jt(t,e)}function iu(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function ru(t){return Object.getPrototypeOf(t.constructor)===Ga}function su(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function ou(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===qt?n=s:ru(s)?i=s:r=s}),r||i||n||null}function au(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rs(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ss(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var zt=class extends Ye{constructor(e=null,n,i){super(ni(n),ii(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qt(n)&&(n.nonNullable||n.initialValueIsDefault)&&(ss(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rs(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rs(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ss(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var uu=t=>t instanceof zt;var bs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ne({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var As=new _e("");var lu={provide:$e,useExisting:Vt(()=>oi)},oi=(()=>{let e=class e extends $e{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ct,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return ns(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){is(i.control||null,i,!1),au(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,su(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new qn(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1,this.form._events.next(new Qn(this.form))}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(is(r||null,i),uu(s)&&(ns(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);tu(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&nu(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){si(this.form,this),this._oldForm&&Jt(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(F(ls,10),F(cs,10),F(ri,8))},e.\u0275dir=ne({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&Ae("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ht([lu]),be,Hn]});let t=e;return t})();var cu={provide:Ct,useExisting:Vt(()=>ai)},ai=(()=>{let e=class e extends Ct{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ct,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=ou(this,o)}ngOnChanges(i){this._added||this._setUpControl(),iu(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return Ka(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(F($e,13),F(ls,10),F(cs,10),F(us,10),F(As,8))},e.\u0275dir=ne({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ht([cu]),be,Hn]});let t=e;return t})();var Fs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=Ge({});let t=e;return t})(),ti=class extends Ye{constructor(e,n,i){super(ni(n),ii(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){_s(this,!1,e),e.forEach((i,r)=>{xs(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function os(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ds=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return os(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Yt(s,o)}record(i,r=null){let s=this._reduceControls(i);return new ei(s,r)}control(i,r,s){let o={};return this.useNonNullable?(os(r)?o=r:(o.validators=r,o.asyncValidators=s),new zt(i,Z(H({},o),{nonNullable:!0}))):new zt(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new ti(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof zt)return i;if(i instanceof Ye)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ps=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:ri,useValue:i.callSetDisabledState??en}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=Ge({imports:[Fs]});let t=e;return t})(),vs=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:As,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:ri,useValue:i.callSetDisabledState??en}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=Ge({imports:[Fs]});let t=e;return t})();l();var Sn=typeof self<"u"?self:global,bt=typeof navigator<"u",fu=bt&&typeof HTMLImageElement>"u",rn=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),yn=Sn.Buffer,tn=Sn.BigInt,Cn=!!yn,hu=t=>t;function sn(t,e=hu){if(rn)try{return typeof Vn=="function"?Promise.resolve(e(Vn(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}var xi=Sn.fetch,pu=t=>xi=t;if(!Sn.fetch){let t=sn("http",i=>i),e=sn("https",i=>i),n=(i,{headers:r}={})=>new Promise((s,o)=>S(void 0,null,function*(){let{port:a,hostname:u,pathname:c,protocol:d,search:h}=new URL(i),m={method:"GET",hostname:u,path:encodeURI(c)+h,headers:r};a!==""&&(m.port=Number(a));let C=(d==="https:"?yield e:yield t).request(m,T=>{if(T.statusCode===301||T.statusCode===302){let M=new URL(T.headers.location,i).toString();return n(M,{headers:r}).then(s).catch(o)}s({status:T.statusCode,arrayBuffer:()=>new Promise(M=>{let L=[];T.on("data",z=>L.push(z)),T.on("end",()=>M(Buffer.concat(L)))})})});C.on("error",o),C.end()}));pu(n)}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var on=t=>zs(t)?void 0:t,gu=t=>t!==void 0;function zs(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(gu).length===0)}function v(t){let e=new Error(t);throw delete e.stack,e}function Pe(t){return(t=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(t).trim())===""?void 0:t}function di(t){let e=function(n){let i=0;return n.ifd0.enabled&&(i+=1024),n.exif.enabled&&(i+=2048),n.makerNote&&(i+=2048),n.userComment&&(i+=1024),n.gps.enabled&&(i+=512),n.interop.enabled&&(i+=100),n.ifd1.enabled&&(i+=1024),i+2048}(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}var fi=t=>String.fromCharCode.apply(null,t),Os=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function Ws(t){return Os?Os.decode(t):Cn?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(fi(t)))}var q=class t{static from(e,n){return e instanceof this&&e.le===n?e:new t(e,void 0,void 0,n)}constructor(e,n=0,i,r){if(typeof r=="boolean"&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-n);let s=new DataView(e,n,i);this._swapDataView(s)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof t){i===void 0&&(i=e.byteLength-n),(n+=e.byteOffset)+i>e.byteOffset+e.byteLength&&v("Creating view outside of available memory in ArrayBuffer");let s=new DataView(e.buffer,n,i);this._swapDataView(s)}else if(typeof e=="number"){let s=new DataView(new ArrayBuffer(e));this._swapDataView(s)}else v("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,n,i=t){return e instanceof DataView||e instanceof t?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||v("BufferView.set(): Invalid data argument."),this.toUint8().set(e,n),new i(this,n,e.byteLength)}subarray(e,n){return n=n||this._lengthToEnd(e),new t(this,e,n)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,n){return new Uint8Array(this.buffer,this.byteOffset+e,n)}getString(e=0,n=this.byteLength){return Ws(this.getUint8Array(e,n))}getLatin1String(e=0,n=this.byteLength){let i=this.getUint8Array(e,n);return fi(i)}getUnicodeString(e=0,n=this.byteLength){let i=[];for(let r=0;r<n&&e+r<this.byteLength;r+=2)i.push(this.getUint16(e+r));return fi(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,n=this.le){return this.dataView.getInt16(e,n)}getInt32(e,n=this.le){return this.dataView.getInt32(e,n)}getUint16(e,n=this.le){return this.dataView.getUint16(e,n)}getUint32(e,n=this.le){return this.dataView.getUint32(e,n)}getFloat32(e,n=this.le){return this.dataView.getFloat32(e,n)}getFloat64(e,n=this.le){return this.dataView.getFloat64(e,n)}getFloat(e,n=this.le){return this.dataView.getFloat32(e,n)}getDouble(e,n=this.le){return this.dataView.getFloat64(e,n)}getUintBytes(e,n,i){switch(n){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,n,i){switch(n){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function hi(t,e){v(`${t} '${e}' was not loaded, try using full build of exifr.`)}var At=class extends Map{constructor(e){super(),this.kind=e}get(e,n){return this.has(e)||hi(this.kind,e),n&&(e in n||function(i,r){v(`Unknown ${i} '${r}'.`)}(this.kind,e),n[e].enabled||hi(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},Q=new At("file parser"),P=new At("segment parser"),te=new At("file reader");function mu(t,e){return typeof t=="string"?Ms(t,e):bt&&!fu&&t instanceof HTMLImageElement?Ms(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new q(t):bt&&t instanceof Blob?pi(t,e,"blob",Ne):void v("Invalid input argument")}function Ms(t,e){return(n=t).startsWith("data:")||n.length>1e4?gi(t,e,"base64"):rn&&t.includes("://")?pi(t,e,"url",Me):rn?gi(t,e,"fs"):bt?pi(t,e,"url",Me):void v("Invalid input argument");var n}function pi(t,e,n,i){return S(this,null,function*(){return te.has(n)?gi(t,e,n):i?function(r,s){return S(this,null,function*(){let o=yield s(r);return new q(o)})}(t,i):void v(`Parser ${n} is not loaded`)})}function gi(t,e,n){return S(this,null,function*(){let i=new(te.get(n))(t,e);return yield i.read(),i})}var Me=t=>xi(t).then(e=>e.arrayBuffer()),Ne=t=>new Promise((e,n)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=n,i.readAsArrayBuffer(t)}),mi=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function D(t,e,n){let i=new mi;for(let[r,s]of n)i.set(r,s);if(Array.isArray(e))for(let r of e)t.set(r,i);else t.set(e,i);return i}function we(t,e,n){let i,r=t.get(e);for(i of n)r.set(i[0],i[1])}var U=new Map,Y=new Map,me=new Map,fe=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],et=["jfif","xmp","icc","iptc","ihdr"],Ue=["tiff",...et],A=["ifd0","ifd1","exif","gps","interop"],he=[...Ue,...A],pe=["makerNote","userComment"],tt=["translateKeys","translateValues","reviveValues","multiSegment"],ge=[...tt,"sanitize","mergeOutput","silentErrors"],an=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},De=class extends an{get needed(){return this.enabled||this.deps.size>0}constructor(e,n,i,r){if(super(),I(this,"enabled",!1),I(this,"skip",new Set),I(this,"pick",new Set),I(this,"deps",new Set),I(this,"translateKeys",!1),I(this,"translateValues",!1),I(this,"reviveValues",!1),this.key=e,this.enabled=n,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=A.includes(e),this.canBeFiltered&&(this.dict=U.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:s,skip:o}=i;s&&s.length>0&&this.translateTagSet(s,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:v(`Invalid options argument: ${i}`)}applyInheritables(e){let n,i;for(n of tt)i=e[n],i!==void 0&&(this[n]=i)}translateTagSet(e,n){if(this.dict){let i,r,{tagKeys:s,tagValues:o}=this.dict;for(i of e)typeof i=="string"?(r=o.indexOf(i),r===-1&&(r=s.indexOf(Number(i))),r!==-1&&n.add(Number(s[r]))):n.add(i)}else for(let i of e)n.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,un(this.pick,this.deps)):this.enabled&&this.pick.size>0&&un(this.pick,this.deps)}},G={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ns=new Map,se=class extends an{static useCached(e){let n=Ns.get(e);return n!==void 0||(n=new this(e),Ns.set(e,n)),n}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):v(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=bt?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of fe)this[e]=G[e];for(e of ge)this[e]=G[e];for(e of pe)this[e]=G[e];for(e of he)this[e]=new De(e,G[e],void 0,this)}setupFromTrue(){let e;for(e of fe)this[e]=G[e];for(e of ge)this[e]=G[e];for(e of pe)this[e]=!0;for(e of he)this[e]=new De(e,!0,void 0,this)}setupFromArray(e){let n;for(n of fe)this[n]=G[n];for(n of ge)this[n]=G[n];for(n of pe)this[n]=G[n];for(n of he)this[n]=new De(n,!1,void 0,this);this.setupGlobalFilters(e,void 0,A)}setupFromObject(e){let n;for(n of(A.ifd0=A.ifd0||A.image,A.ifd1=A.ifd1||A.thumbnail,Object.assign(this,e),fe))this[n]=ui(e[n],G[n]);for(n of ge)this[n]=ui(e[n],G[n]);for(n of pe)this[n]=ui(e[n],G[n]);for(n of Ue)this[n]=new De(n,G[n],e[n],this);for(n of A)this[n]=new De(n,G[n],e[n],this.tiff);this.setupGlobalFilters(e.pick,e.skip,A,he),e.tiff===!0?this.batchEnableWithBool(A,!0):e.tiff===!1?this.batchEnableWithUserValue(A,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,A):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,A)}batchEnableWithBool(e,n){for(let i of e)this[i].enabled=n}batchEnableWithUserValue(e,n){for(let i of e){let r=n[i];this[i].enabled=r!==!1&&r!==void 0}}setupGlobalFilters(e,n,i,r=i){if(e&&e.length){for(let o of r)this[o].enabled=!1;let s=ws(e,i);for(let[o,a]of s)un(this[o].pick,a),this[o].enabled=!0}else if(n&&n.length){let s=ws(n,i);for(let[o,a]of s)un(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:n,xmp:i,iptc:r,icc:s}=this;this.makerNote?n.deps.add(37500):n.skip.add(37500),this.userComment?n.deps.add(37510):n.skip.add(37510),i.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),s.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:n,gps:i,interop:r}=this;r.needed&&(n.deps.add(40965),e.deps.add(40965)),n.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=A.some(s=>this[s].enabled===!0)||this.makerNote||this.userComment;for(let s of A)this[s].finalizeFilters()}get onlyTiff(){return!et.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Ue)this[e].enabled&&!P.has(e)&&hi("segment parser",e)}};function ws(t,e){let n,i,r,s,o=[];for(r of e){for(s of(n=U.get(r),i=[],n))(t.includes(s[0])||t.includes(s[1]))&&i.push(s[0]);i.length&&o.push([r,i])}return o}function ui(t,e){return t!==void 0?t:e!==void 0?e:void 0}function un(t,e){for(let n of e)t.add(n)}I(se,"default",G);var ee=class{constructor(e){I(this,"parsers",{}),I(this,"output",{}),I(this,"errors",[]),I(this,"pushToErrors",n=>this.errors.push(n)),this.options=se.useCached(e)}read(e){return S(this,null,function*(){this.file=yield mu(e,this.options)})}setup(){if(this.fileParser)return;let{file:e}=this,n=e.getUint16(0);for(let[i,r]of Q)if(r.canHandle(e,n))return this.fileParser=new r(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),v("Unknown file format")}parse(){return S(this,null,function*(){let{output:e,errors:n}=this;return this.setup(),this.options.silentErrors?(yield this.executeParsers().catch(this.pushToErrors),n.push(...this.fileParser.errors)):yield this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(e.errors=n),on(e)})}executeParsers(){return S(this,null,function*(){let{output:e}=this;yield this.fileParser.parse();let n=Object.values(this.parsers).map(i=>S(this,null,function*(){let r=yield i.parse();i.assignToOutput(e,r)}));this.options.silentErrors&&(n=n.map(i=>i.catch(this.pushToErrors))),yield Promise.all(n)})}extractThumbnail(){return S(this,null,function*(){this.setup();let{options:e,file:n}=this,i=P.get("tiff",e);var r;if(n.tiff?r={start:0,type:"tiff"}:n.jpeg&&(r=yield this.fileParser.getOrFindSegment("tiff")),r===void 0)return;let s=yield this.fileParser.ensureSegmentChunk(r),o=this.parsers.tiff=new i(s,e,n),a=yield o.extractThumbnail();return n.close&&n.close(),a})}};function En(t,e){return S(this,null,function*(){let n=new ee(e);return yield n.read(t),n.parse()})}var Su=Object.freeze({__proto__:null,parse:En,Exifr:ee,fileParsers:Q,segmentParsers:P,fileReaders:te,tagKeys:U,tagValues:Y,tagRevivers:me,createDictionary:D,extendDictionary:we,fetchUrlAsArrayBuffer:Me,readBlobAsArrayBuffer:Ne,chunkedProps:fe,otherSegments:et,segments:Ue,tiffBlocks:A,segmentsAndBlocks:he,tiffExtractables:pe,inheritables:tt,allFormatters:ge,Options:se}),qe=class{constructor(e,n,i){I(this,"errors",[]),I(this,"ensureSegmentChunk",r=>S(this,null,function*(){let s=r.start,o=r.size||65536;if(this.file.chunked)if(this.file.available(s,o))r.chunk=this.file.subarray(s,o);else try{r.chunk=yield this.file.readChunk(s,o)}catch(a){v(`Couldn't read segment: ${JSON.stringify(r)}. ${a.message}`)}else this.file.byteLength>s+o?r.chunk=this.file.subarray(s,o):r.size===void 0?r.chunk=this.file.subarray(s):v("Segment unreachable: "+JSON.stringify(r));return r.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=n,this.parsers=i}injectSegment(e,n){this.options[e].enabled&&this.createParser(e,n)}createParser(e,n){let i=new(P.get(e))(n,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let n of e){let{type:i,chunk:r}=n,s=this.options[i];if(s&&s.enabled){let o=this.parsers[i];o&&o.append||o||this.createParser(i,r)}}}readSegments(e){return S(this,null,function*(){let n=e.map(this.ensureSegmentChunk);yield Promise.all(n)})}},j=class{static findPosition(e,n){let i=e.getUint16(n+2)+2,r=typeof this.headerLength=="function"?this.headerLength(e,n,i):this.headerLength,s=n+r,o=i-r;return{offset:n,length:i,headerLength:r,start:s,size:o,end:s+o}}static parse(e,n={}){return new this(e,new se({[this.type]:n}),e).parse()}normalizeInput(e){return e instanceof q?e:new q(e)}constructor(e,n={},i){I(this,"errors",[]),I(this,"raw",new Map),I(this,"handleError",r=>{if(!this.options.silentErrors)throw r;this.errors.push(r.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=n,this.localOptions=n[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,n){let i=me.get(n),r=Y.get(n),s=U.get(n),o=this.options[n],a=o.reviveValues&&!!i,u=o.translateValues&&!!r,c=o.translateKeys&&!!s,d={};for(let[h,m]of e)a&&i.has(h)?m=i.get(h)(m):u&&r.has(h)&&(m=this.translateValue(m,r.get(h))),c&&s.has(h)&&(h=s.get(h)||h),d[h]=m;return d}translateValue(e,n){return n[e]||n.DEFAULT||e}assignToOutput(e,n){this.assignObjectToOutput(e,this.constructor.type,n)}assignObjectToOutput(e,n,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[n]?Object.assign(e[n],i):e[n]=i}};I(j,"headerLength",4),I(j,"type",void 0),I(j,"multiSegment",!1),I(j,"canHandle",()=>!1);function yu(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function Cu(t){return t>=224&&t<=239}function Eu(t,e,n){for(let[i,r]of P)if(r.canHandle(t,e,n))return i}var ln=class extends qe{constructor(...e){super(...e),I(this,"appSegments",[]),I(this,"jpegSegments",[]),I(this,"unknownSegments",[])}static canHandle(e,n){return n===65496}parse(){return S(this,null,function*(){yield this.findAppSegments(),yield this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)})}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(P.keyList())):(e=e===void 0?P.keyList().filter(n=>this.options[n].enabled):e.filter(n=>this.options[n].enabled&&P.has(n)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}findAppSegments(e=0,n){return S(this,null,function*(){this.setupSegmentFinderArgs(n);let{file:i,findAll:r,wanted:s,remaining:o}=this;if(!r&&this.file.chunked&&(r=Array.from(s).some(a=>{let u=P.get(a),c=this.options[a];return u.multiSegment&&c.multiSegment}),r&&(yield this.file.readWhole())),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let a=!1;for(;o.size>0&&!a&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:u}=i,c=this.appSegments.some(d=>!this.file.available(d.offset||d.start,d.length||d.size));if(a=e>u&&!c?!(yield i.readNextChunk(e)):!(yield i.readNextChunk(u)),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}})}findAppSegmentsInRange(e,n){n-=2;let i,r,s,o,a,u,{file:c,findAll:d,wanted:h,remaining:m,options:C}=this;for(;e<n;e++)if(c.getUint8(e)===255){if(i=c.getUint8(e+1),Cu(i)){if(r=c.getUint16(e+2),s=Eu(c,e,r),s&&h.has(s)&&(o=P.get(s),a=o.findPosition(c,e),u=C[s],a.type=s,this.appSegments.push(a),!d&&(o.multiSegment&&u.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||m.delete(s)):m.delete(s),m.size===0)))break;C.recordUnknownSegments&&(a=j.findPosition(c,e),a.marker=i,this.unknownSegments.push(a)),e+=r+1}else if(yu(i)){if(r=c.getUint16(e+2),i===218&&C.stopAfterSos!==!1)return;C.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:i}),e+=r+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(n=>n.multiSegment))return;let e=function(n,i){let r,s,o,a=new Map;for(let u=0;u<n.length;u++)r=n[u],s=r[i],a.has(s)?o=a.get(s):a.set(s,o=[]),o.push(r);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([n,i])=>{let r=P.get(n,this.options);return r.handleMultiSegments?{type:n,chunk:r.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(n=>n.type===e)}getOrFindSegment(e){return S(this,null,function*(){let n=this.getSegment(e);return n===void 0&&(yield this.findAppSegments(0,[e]),n=this.getSegment(e)),n})}};I(ln,"type","jpeg"),Q.set("jpeg",ln);var Iu=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],Si=class extends j{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,n,i=new Map){let{pick:r,skip:s}=this.options[n];r=new Set(r);let o=r.size>0,a=s.size===0,u=this.chunk.getUint16(e);e+=2;for(let c=0;c<u;c++){let d=this.chunk.getUint16(e);if(o){if(r.has(d)&&(i.set(d,this.parseTag(e,d,n)),r.delete(d),r.size===0))break}else!a&&s.has(d)||i.set(d,this.parseTag(e,d,n));e+=12}return i}parseTag(e,n,i){let{chunk:r}=this,s=r.getUint16(e+2),o=r.getUint32(e+4),a=Iu[s];if(a*o<=4?e+=8:e=r.getUint32(e+8),(s<1||s>13)&&v(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${n.toString(16)}, type: ${s}, offset ${e}`),e>r.byteLength&&v(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${n.toString(16)}, type: ${s}, offset ${e} is outside of chunk size ${r.byteLength}`),s===1)return r.getUint8Array(e,o);if(s===2)return Pe(r.getString(e,o));if(s===7)return r.getUint8Array(e,o);if(o===1)return this.parseTagValue(s,e);{let u=new(function(d){switch(d){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(s))(o),c=a;for(let d=0;d<o;d++)u[d]=this.parseTagValue(s,e),e+=c;return u}}parseTagValue(e,n){let{chunk:i}=this;switch(e){case 1:return i.getUint8(n);case 3:return i.getUint16(n);case 4:return i.getUint32(n);case 5:return i.getUint32(n)/i.getUint32(n+4);case 6:return i.getInt8(n);case 8:return i.getInt16(n);case 9:return i.getInt32(n);case 10:return i.getInt32(n)/i.getInt32(n+4);case 11:return i.getFloat(n);case 12:return i.getDouble(n);case 13:return i.getUint32(n);default:v(`Invalid tiff type ${e}`)}}},It=class extends Si{static canHandle(e,n){return e.getUint8(n+1)===225&&e.getUint32(n+4)===1165519206&&e.getUint16(n+8)===0}parse(){return S(this,null,function*(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&(yield this.parseIfd0Block()),e.exif.enabled&&(yield this.safeParse("parseExifBlock")),e.gps.enabled&&(yield this.safeParse("parseGpsBlock")),e.interop.enabled&&(yield this.safeParse("parseInteropBlock")),e.ifd1.enabled&&(yield this.safeParse("parseThumbnailBlock")),this.createOutput()})}safeParse(e){let n=this[e]();return n.catch!==void 0&&(n=n.catch(this.handleError)),n}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),n=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(n)}}parseBlock(e,n){let i=new Map;return this[n]=i,this.parseTags(e,n,i),i}parseIfd0Block(){return S(this,null,function*(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&v("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&v(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&(yield e.ensureChunk(this.ifd0Offset,di(this.options)));let n=this.parseBlock(this.ifd0Offset,"ifd0");return n.size!==0?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0})}parseExifBlock(){return S(this,null,function*(){if(this.exif||(this.ifd0||(yield this.parseIfd0Block()),this.exifOffset===void 0))return;this.file.tiff&&(yield this.file.ensureChunk(this.exifOffset,di(this.options)));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e})}unpack(e,n){let i=e.get(n);i&&i.length===1&&e.set(n,i[0])}parseGpsBlock(){return S(this,null,function*(){if(this.gps||(this.ifd0||(yield this.parseIfd0Block()),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Us(...e.get(2),e.get(1))),e.set("longitude",Us(...e.get(4),e.get(3)))),e})}parseInteropBlock(){return S(this,null,function*(){if(!this.interop&&(this.ifd0||(yield this.parseIfd0Block()),this.interopOffset!==void 0||this.exif||(yield this.parseExifBlock()),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")})}parseThumbnailBlock(e=!1){return S(this,null,function*(){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1})}extractThumbnail(){return S(this,null,function*(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||(yield this.parseThumbnailBlock(!0)),this.ifd1===void 0)return;let e=this.ifd1.get(513),n=this.ifd1.get(514);return this.chunk.getUint8Array(e,n)})}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,n,i,r={};for(n of A)if(e=this[n],!zs(e))if(i=this.canTranslate?this.translateBlock(e,n):Object.fromEntries(e),this.options.mergeOutput){if(n==="ifd1")continue;Object.assign(r,i)}else r[n]=i;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,n){if(this.globalOptions.mergeOutput)Object.assign(e,n);else for(let[i,r]of Object.entries(n))this.assignObjectToOutput(e,i,r)}};function Us(t,e,n,i){var r=t+e/60+n/3600;return i!=="S"&&i!=="W"||(r*=-1),r}I(It,"type","tiff"),I(It,"headerLength",10),P.set("tiff",It);var xu=Object.freeze({__proto__:null,default:Su,Exifr:ee,fileParsers:Q,segmentParsers:P,fileReaders:te,tagKeys:U,tagValues:Y,tagRevivers:me,createDictionary:D,extendDictionary:we,fetchUrlAsArrayBuffer:Me,readBlobAsArrayBuffer:Ne,chunkedProps:fe,otherSegments:et,segments:Ue,tiffBlocks:A,segmentsAndBlocks:he,tiffExtractables:pe,inheritables:tt,allFormatters:ge,Options:se,parse:En}),_i={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Ti=Object.assign({},_i,{firstChunkSize:4e4,gps:[1,2,3,4]});function Xs(t){return S(this,null,function*(){let e=new ee(Ti);yield e.read(t);let n=yield e.parse();if(n&&n.gps){let{latitude:i,longitude:r}=n.gps;return{latitude:i,longitude:r}}})}var bi=Object.assign({},_i,{tiff:!1,ifd1:!0,mergeOutput:!1});function Zs(t){return S(this,null,function*(){let e=new ee(bi);yield e.read(t);let n=yield e.extractThumbnail();return n&&Cn?yn.from(n):n})}function $s(t){return S(this,null,function*(){let e=yield this.thumbnail(t);if(e!==void 0){let n=new Blob([e]);return URL.createObjectURL(n)}})}var Ai=Object.assign({},_i,{firstChunkSize:4e4,ifd0:[274]});function Fi(t){return S(this,null,function*(){let e=new ee(Ai);yield e.read(t);let n=yield e.parse();if(n&&n.ifd0)return n.ifd0[274]})}var Di=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),ve=!0,Oe=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,n,i]=e;ve=Number(n)+.1*Number(i)<13.4,Oe=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);ve=Oe=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);ve=Oe=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);ve=Oe=Number(e)<77}}function Ys(t){return S(this,null,function*(){let e=yield Fi(t);return Object.assign({canvas:ve,css:Oe},Di[e])})}var yi=class extends q{constructor(...e){super(...e),I(this,"ranges",new Ci),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,n,i){if(e===0&&this.byteLength===0&&i){let r=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(r)}else{let r=e+n;if(r>this.byteLength){let{dataView:s}=this._extend(r);this._swapDataView(s)}}}_extend(e){let n;n=Cn?yn.allocUnsafe(e):new Uint8Array(e);let i=new DataView(n.buffer,n.byteOffset,n.byteLength);return n.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:n,dataView:i}}subarray(e,n,i=!1){return n=n||this._lengthToEnd(e),i&&this._tryExtend(e,n),this.ranges.add(e,n),super.subarray(e,n)}set(e,n,i=!1){i&&this._tryExtend(n,e.byteLength,e);let r=super.set(e,n);return this.ranges.add(n,r.byteLength),r}ensureChunk(e,n){return S(this,null,function*(){this.chunked&&(this.ranges.available(e,n)||(yield this.readChunk(e,n)))})}available(e,n){return this.ranges.available(e,n)}},Ci=class{constructor(){I(this,"list",[])}get length(){return this.list.length}add(e,n,i=0){let r=e+n,s=this.list.filter(o=>Rs(e,o.offset,r)||Rs(e,o.end,r));if(s.length>0){e=Math.min(e,...s.map(a=>a.offset)),r=Math.max(r,...s.map(a=>a.end)),n=r-e;let o=s.shift();o.offset=e,o.length=n,o.end=r,this.list=this.list.filter(a=>!s.includes(a))}else this.list.push({offset:e,length:n,end:r})}available(e,n){let i=e+n;return this.list.some(r=>r.offset<=e&&i<=r.end)}};function Rs(t,e,n){return t<=e&&e<=n}var Qe=class extends yi{constructor(e,n){super(0),I(this,"chunksRead",0),this.input=e,this.options=n}readWhole(){return S(this,null,function*(){this.chunked=!1,yield this.readChunk(this.nextChunkOffset)})}readChunked(){return S(this,null,function*(){this.chunked=!0,yield this.readChunk(0,this.options.firstChunkSize)})}readNextChunk(){return S(this,arguments,function*(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let n=this.options.chunkSize,i=yield this.readChunk(e,n);return!!i&&i.byteLength===n})}readChunk(e,n){return S(this,null,function*(){if(this.chunksRead++,(n=this.safeWrapAddress(e,n))!==0)return this._readChunk(e,n)})}safeWrapAddress(e,n){return this.size!==void 0&&e+n>this.size?Math.max(0,this.size-e):n}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};te.set("blob",class extends Qe{readWhole(){return S(this,null,function*(){this.chunked=!1;let t=yield Ne(this.input);this._swapArrayBuffer(t)})}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}_readChunk(t,e){return S(this,null,function*(){let n=e?t+e:void 0,i=this.input.slice(t,n),r=yield Ne(i);return this.set(r,t,!0)})}});var _u=Object.freeze({__proto__:null,default:xu,Exifr:ee,fileParsers:Q,segmentParsers:P,fileReaders:te,tagKeys:U,tagValues:Y,tagRevivers:me,createDictionary:D,extendDictionary:we,fetchUrlAsArrayBuffer:Me,readBlobAsArrayBuffer:Ne,chunkedProps:fe,otherSegments:et,segments:Ue,tiffBlocks:A,segmentsAndBlocks:he,tiffExtractables:pe,inheritables:tt,allFormatters:ge,Options:se,parse:En,gpsOnlyOptions:Ti,gps:Xs,thumbnailOnlyOptions:bi,thumbnail:Zs,thumbnailUrl:$s,orientationOnlyOptions:Ai,orientation:Fi,rotations:Di,get rotateCanvas(){return ve},get rotateCss(){return Oe},rotation:Ys});te.set("url",class extends Qe{readWhole(){return S(this,null,function*(){this.chunked=!1;let t=yield Me(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)})}_readChunk(t,e){return S(this,null,function*(){let n=e?t+e-1:void 0,i=this.options.httpHeaders||{};(t||n)&&(i.range=`bytes=${[t,n].join("-")}`);let r=yield xi(this.input,{headers:i}),s=yield r.arrayBuffer(),o=s.byteLength;if(r.status!==416)return o!==e&&(this.size=t+o),this.set(s,t,!0)})}});q.prototype.getUint64=function(t){let e=this.getUint32(t),n=this.getUint32(t+4);return e<1048575?e<<32|n:typeof tn!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),tn(e)<<tn(32)|tn(n)):void v("Trying to read 64b value but JS can only handle 53b numbers.")};var Ei=class extends qe{parseBoxes(e=0){let n=[];for(;e<this.file.byteLength-4;){let i=this.parseBoxHead(e);if(n.push(i),i.length===0)break;e+=i.length}return n}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,n){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find(i=>i.kind===n)}parseBoxHead(e){let n=this.file.getUint32(e),i=this.file.getString(e+4,4),r=e+8;return n===1&&(n=this.file.getUint64(e+8),r+=8),{offset:e,length:n,kind:i,start:r}}parseBoxFullHead(e){if(e.version!==void 0)return;let n=this.file.getUint32(e.start);e.version=n>>24,e.start+=4}},cn=class extends Ei{static canHandle(e,n){if(n!==0)return!1;let i=e.getUint16(2);if(i>50)return!1;let r=16,s=[];for(;r<i;)s.push(e.getString(r,4)),r+=4;return s.includes(this.type)}parse(){return S(this,null,function*(){let e=this.file.getUint32(0),n=this.parseBoxHead(e);for(;n.kind!=="meta";)e+=n.length,yield this.file.ensureChunk(e,16),n=this.parseBoxHead(e);yield this.file.ensureChunk(n.offset,n.length),this.parseBoxFullHead(n),this.parseSubBoxes(n),this.options.icc.enabled&&(yield this.findIcc(n)),this.options.tiff.enabled&&(yield this.findExif(n))})}registerSegment(e,n,i){return S(this,null,function*(){yield this.file.ensureChunk(n,i);let r=this.file.subarray(n,i);this.createParser(e,r)})}findIcc(e){return S(this,null,function*(){let n=this.findBox(e,"iprp");if(n===void 0)return;let i=this.findBox(n,"ipco");if(i===void 0)return;let r=this.findBox(i,"colr");r!==void 0&&(yield this.registerSegment("icc",r.offset+12,r.length))})}findExif(e){return S(this,null,function*(){let n=this.findBox(e,"iinf");if(n===void 0)return;let i=this.findBox(e,"iloc");if(i===void 0)return;let r=this.findExifLocIdInIinf(n),s=this.findExtentInIloc(i,r);if(s===void 0)return;let[o,a]=s;yield this.file.ensureChunk(o,a);let u=4+this.file.getUint32(o);o+=u,a-=u,yield this.registerSegment("tiff",o,a)})}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let n,i,r,s,o=e.start,a=this.file.getUint16(o);for(o+=2;a--;){if(n=this.parseBoxHead(o),this.parseBoxFullHead(n),i=n.start,n.version>=2&&(r=n.version===3?4:2,s=this.file.getString(i+r+2,4),s==="Exif"))return this.file.getUintBytes(i,r);o+=n.length}}get8bits(e){let n=this.file.getUint8(e);return[n>>4,15&n]}findExtentInIloc(e,n){this.parseBoxFullHead(e);let i=e.start,[r,s]=this.get8bits(i++),[o,a]=this.get8bits(i++),u=e.version===2?4:2,c=e.version===1||e.version===2?2:0,d=a+r+s,h=e.version===2?4:2,m=this.file.getUintBytes(i,h);for(i+=h;m--;){let C=this.file.getUintBytes(i,u);i+=u+c+2+o;let T=this.file.getUint16(i);if(i+=2,C===n)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(i+a,r),this.file.getUintBytes(i+a+r,s)];i+=T*d}}},dn=class extends cn{};I(dn,"type","heic");var fn=class extends cn{};I(fn,"type","avif"),Q.set("heic",dn),Q.set("avif",fn),D(U,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),D(U,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),D(U,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),D(Y,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);var xt=D(Y,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]),ks={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};xt.set(37392,ks),xt.set(41488,ks);var li={0:"Normal",1:"Low",2:"High"};function Ls(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function Bs(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map(n=>String.fromCharCode(n))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function ci(t){if(typeof t=="string"){var[e,n,i,r,s,o]=t.trim().split(/[-: ]/g).map(Number),a=new Date(e,n-1,i);return Number.isNaN(r)||Number.isNaN(s)||Number.isNaN(o)||(a.setHours(r),a.setMinutes(s),a.setSeconds(o)),Number.isNaN(+a)?t:a}}function Et(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let n=0;n<t.length;n+=2)e.push(Gs(t[n+1],t[n]));else for(let n=0;n<t.length;n+=2)e.push(Gs(t[n],t[n+1]));return Pe(String.fromCodePoint(...e))}function Gs(t,e){return t<<8|e}xt.set(41992,li),xt.set(41993,li),xt.set(41994,li),D(me,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?Ws(t):t}],[306,ci],[40091,Et],[40092,Et],[40093,Et],[40094,Et],[40095,Et]]),D(me,"exif",[[40960,Bs],[36864,Bs],[36867,ci],[36868,ci],[40962,Ls],[40963,Ls]]),D(me,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);var _t=class extends j{static canHandle(e,n){return e.getUint8(n+1)===225&&e.getUint32(n+4)===1752462448&&e.getString(n+4,20)==="http://ns.adobe.com/"}static headerLength(e,n){return e.getString(n+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,n){let i=super.findPosition(e,n);return i.multiSegment=i.extended=i.headerLength===79,i.multiSegment?(i.chunkCount=e.getUint8(n+72),i.chunkNumber=e.getUint8(n+76),e.getUint8(n+77)!==0&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(e){return e.map(n=>n.chunk.getString()).join("")}normalizeInput(e){return typeof e=="string"?e:q.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(s){let o={},a={};for(let u of Qs)o[u]=[],a[u]=0;return s.replace(Fu,(u,c,d)=>{if(c==="<"){let h=++a[d];return o[d].push(h),`${u}#${h}`}return`${u}#${o[d].pop()}`})}(e);let n=hn.findAll(e,"rdf","Description");n.length===0&&n.push(new hn("rdf","Description",void 0,e));let i,r={};for(let s of n)for(let o of s.properties)i=Au(o.ns,r),Ks(o,i);return function(s){let o;for(let a in s)o=s[a]=on(s[a]),o===void 0&&delete s[a];return on(s)}(r)}assignToOutput(e,n){if(this.localOptions.parse)for(let[i,r]of Object.entries(n))switch(i){case"tiff":this.assignObjectToOutput(e,"ifd0",r);break;case"exif":this.assignObjectToOutput(e,"exif",r);break;case"xmlns":break;default:this.assignObjectToOutput(e,i,r)}else e.xmp=n}};I(_t,"type","xmp"),I(_t,"multiSegment",!0),P.set("xmp",_t);var Ii=class t{static findAll(e){return Js(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(t.unpackMatch)}static unpackMatch(e){let n=e[1],i=e[2],r=e[3].slice(1,-1);return r=qs(r),new t(n,i,r)}constructor(e,n,i){this.ns=e,this.name=n,this.value=i}serialize(){return this.value}},hn=class t{static findAll(e,n,i){if(n!==void 0||i!==void 0){n=n||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var r=new RegExp(`<(${n}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else r=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Js(e,r).map(t.unpackMatch)}static unpackMatch(e){let n=e[1],i=e[2],r=e[4],s=e[8];return new t(n,i,r,s)}constructor(e,n,i,r){this.ns=e,this.name=n,this.attrString=i,this.innerXml=r,this.attrs=Ii.findAll(i),this.children=t.findAll(r),this.value=this.children.length===0?qs(r):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:n}=this;return e==="rdf"&&(n==="Seq"||n==="Bag"||n==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return bu(this.children.map(Tu));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let n of this.properties)Ks(n,e);return this.value!==void 0&&(e.value=this.value),on(e)}};function Ks(t,e){let n=t.serialize();n!==void 0&&(e[t.name]=n)}var Tu=t=>t.serialize(),bu=t=>t.length===1?t[0]:t,Au=(t,e)=>e[t]?e[t]:e[t]={};function Js(t,e){let n,i=[];if(!t)return i;for(;(n=e.exec(t))!==null;)i.push(n);return i}function qs(t){if(function(i){return i==null||i==="null"||i==="undefined"||i===""||i.trim()===""}(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let n=t.toLowerCase();return n==="true"||n!=="false"&&t.trim()}var Qs=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Fu=new RegExp(`(<|\\/)(${Qs.join("|")})`,"g"),Du=Object.freeze({__proto__:null,default:_u,Exifr:ee,fileParsers:Q,segmentParsers:P,fileReaders:te,tagKeys:U,tagValues:Y,tagRevivers:me,createDictionary:D,extendDictionary:we,fetchUrlAsArrayBuffer:Me,readBlobAsArrayBuffer:Ne,chunkedProps:fe,otherSegments:et,segments:Ue,tiffBlocks:A,segmentsAndBlocks:he,tiffExtractables:pe,inheritables:tt,allFormatters:ge,Options:se,parse:En,gpsOnlyOptions:Ti,gps:Xs,thumbnailOnlyOptions:bi,thumbnail:Zs,thumbnailUrl:$s,orientationOnlyOptions:Ai,orientation:Fi,rotations:Di,get rotateCanvas(){return ve},get rotateCss(){return Oe},rotation:Ys});var Vs=sn("fs",t=>t.promises);te.set("fs",class extends Qe{readWhole(){return S(this,null,function*(){this.chunked=!1,this.fs=yield Vs;let t=yield this.fs.readFile(this.input);this._swapBuffer(t)})}readChunked(){return S(this,null,function*(){this.chunked=!0,this.fs=yield Vs,yield this.open(),yield this.readChunk(0,this.options.firstChunkSize)})}open(){return S(this,null,function*(){this.fh===void 0&&(this.fh=yield this.fs.open(this.input,"r"),this.size=(yield this.fh.stat(this.input)).size)})}_readChunk(t,e){return S(this,null,function*(){this.fh===void 0&&(yield this.open()),t+e>this.size&&(e=this.size-t);var n=this.subarray(t,e,!0);return yield this.fh.read(n.dataView,0,e,t),n})}close(){return S(this,null,function*(){if(this.fh){let t=this.fh;this.fh=void 0,yield t.close()}})}});te.set("base64",class extends Qe{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}_readChunk(t,e){return S(this,null,function*(){let n,i,r=this.input;t===void 0?(t=0,n=0,i=0):(n=4*Math.floor(t/3),i=t-n/4*3),e===void 0&&(e=this.size);let s=t+e,o=n+4*Math.ceil(s/3);r=r.slice(n,o);let a=Math.min(e,this.size-t);if(Cn){let u=yn.from(r,"base64").slice(i,i+a);return this.set(u,t,!0)}{let u=this.subarray(t,a,!0),c=atob(r),d=u.toUint8();for(let h=0;h<a;h++)d[h]=c.charCodeAt(i+h);return u}})}});var pn=class extends qe{static canHandle(e,n){return n===18761||n===19789}extendOptions(e){let{ifd0:n,xmp:i,iptc:r,icc:s}=e;i.enabled&&n.deps.add(700),r.enabled&&n.deps.add(33723),s.enabled&&n.deps.add(34675),n.finalizeFilters()}parse(){return S(this,null,function*(){let{tiff:e,xmp:n,iptc:i,icc:r}=this.options;if(e.enabled||n.enabled||i.enabled||r.enabled){let s=Math.max(di(this.options),this.options.chunkSize);yield this.file.ensureChunk(0,s),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),yield this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}})}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let n=this.parsers.tiff[e];this.injectSegment(e,n)}}};I(pn,"type","tiff"),Q.set("tiff",pn);var Pu=sn("zlib"),vu=["ihdr","iccp","text","itxt","exif"],gn=class extends qe{constructor(...e){super(...e),I(this,"catchError",n=>this.errors.push(n)),I(this,"metaChunks",[]),I(this,"unknownChunks",[])}static canHandle(e,n){return n===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}parse(){return S(this,null,function*(){let{file:e}=this;yield this.findPngChunksInRange(8,e.byteLength),yield this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),yield this.findExif().catch(this.catchError),yield this.findXmp().catch(this.catchError),yield this.findIcc().catch(this.catchError)})}findPngChunksInRange(e,n){return S(this,null,function*(){let{file:i}=this;for(;e<n;){let r=i.getUint32(e),s=i.getUint32(e+4),o=i.getString(e+4,4).toLowerCase(),a=r+4+4+4,u={type:o,offset:e,length:a,start:e+4+4,size:r,marker:s};vu.includes(o)?this.metaChunks.push(u):this.unknownChunks.push(u),e+=a}})}parseTextChunks(){let e=this.metaChunks.filter(n=>n.type==="text");for(let n of e){let[i,r]=this.file.getString(n.start,n.size).split("\0");this.injectKeyValToIhdr(i,r)}}injectKeyValToIhdr(e,n){let i=this.parsers.ihdr;i&&i.raw.set(e,n)}findIhdr(){let e=this.metaChunks.find(n=>n.type==="ihdr");e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}findExif(){return S(this,null,function*(){let e=this.metaChunks.find(n=>n.type==="exif");e&&this.injectSegment("tiff",e.chunk)})}findXmp(){return S(this,null,function*(){let e=this.metaChunks.filter(n=>n.type==="itxt");for(let n of e)n.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",n.chunk)})}findIcc(){return S(this,null,function*(){let e=this.metaChunks.find(a=>a.type==="iccp");if(!e)return;let{chunk:n}=e,i=n.getUint8Array(0,81),r=0;for(;r<80&&i[r]!==0;)r++;let s=r+2,o=n.getString(0,r);if(this.injectKeyValToIhdr("ProfileName",o),rn){let a=yield Pu,u=n.getUint8Array(s);u=a.inflateSync(u),this.injectSegment("icc",u)}})}};I(gn,"type","png"),Q.set("png",gn),D(U,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),we(U,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);var Hs=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];we(U,"ifd0",Hs),we(U,"exif",Hs),D(Y,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);var Tt=class extends j{static canHandle(e,n){return e.getUint8(n+1)===224&&e.getUint32(n+4)===1246120262&&e.getUint8(n+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}};I(Tt,"type","jfif"),I(Tt,"headerLength",9),P.set("jfif",Tt),D(U,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);var mn=class extends j{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}};I(mn,"type","ihdr"),P.set("ihdr",mn),D(U,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),D(Y,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);var Je=class extends j{static canHandle(e,n){return e.getUint8(n+1)===226&&e.getUint32(n+4)===1229144927}static findPosition(e,n){let i=super.findPosition(e,n);return i.chunkNumber=e.getUint8(n+16),i.chunkCount=e.getUint8(n+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(e){return function(n){let i=function(r){let s=r[0].constructor,o=0;for(let c of r)o+=c.length;let a=new s(o),u=0;for(let c of r)a.set(c,u),u+=c.length;return a}(n.map(r=>r.chunk.toUint8()));return new q(i)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&v("ICC header is too short");for(let[n,i]of Object.entries(Ou)){n=parseInt(n,10);let r=i(this.chunk,n);r!=="\0\0\0\0"&&e.set(n,r)}}parseTags(){let e,n,i,r,s,{raw:o}=this,a=this.chunk.getUint32(128),u=132,c=this.chunk.byteLength;for(;a--;){if(e=this.chunk.getString(u,4),n=this.chunk.getUint32(u+4),i=this.chunk.getUint32(u+8),r=this.chunk.getString(n,4),n+i>c)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");s=this.parseTag(r,n,i),s!==void 0&&s!=="\0\0\0\0"&&o.set(e,s),u+=12}}parseTag(e,n,i){switch(e){case"desc":return this.parseDesc(n);case"mluc":return this.parseMluc(n);case"text":return this.parseText(n,i);case"sig ":return this.parseSig(n)}if(!(n+i>this.chunk.byteLength))return this.chunk.getUint8Array(n,i)}parseDesc(e){let n=this.chunk.getUint32(e+8)-1;return Pe(this.chunk.getString(e+12,n))}parseText(e,n){return Pe(this.chunk.getString(e+8,n-8))}parseSig(e){return Pe(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:n}=this,i=n.getUint32(e+8),r=n.getUint32(e+12),s=e+16,o=[];for(let a=0;a<i;a++){let u=n.getString(s+0,2),c=n.getString(s+2,2),d=n.getUint32(s+4),h=n.getUint32(s+8)+e,m=Pe(n.getUnicodeString(h,d));o.push({lang:u,country:c,text:m}),s+=r}return i===1?o[0].text:o}translateValue(e,n){return typeof e=="string"?n[e]||n[e.toLowerCase()]||e:n[e]||e}};I(Je,"type","icc"),I(Je,"multiSegment",!0),I(Je,"headerLength",18);var Ou={4:re,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map(n=>n.toString(10)).join(".")},12:re,16:re,20:re,24:function(t,e){let n=t.getUint16(e),i=t.getUint16(e+2)-1,r=t.getUint16(e+4),s=t.getUint16(e+6),o=t.getUint16(e+8),a=t.getUint16(e+10);return new Date(Date.UTC(n,i,r,s,o,a))},36:re,40:re,48:re,52:re,64:(t,e)=>t.getUint32(e),80:re};function re(t,e){return Pe(t.getString(e,4))}P.set("icc",Je),D(U,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);var nn={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},js={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};D(Y,"icc",[[4,nn],[12,js],[40,Object.assign({},nn,js)],[48,nn],[80,nn],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);var Ke=class extends j{static canHandle(e,n,i){return e.getUint8(n+1)===237&&e.getString(n+4,9)==="Photoshop"&&this.containsIptc8bim(e,n,i)!==void 0}static headerLength(e,n,i){let r,s=this.containsIptc8bim(e,n,i);if(s!==void 0)return r=e.getUint8(n+s+7),r%2!=0&&(r+=1),r===0&&(r=4),s+8+r}static containsIptc8bim(e,n,i){for(let r=0;r<i;r++)if(this.isIptcSegmentHead(e,n+r))return r}static isIptcSegmentHead(e,n){return e.getUint8(n)===56&&e.getUint32(n)===943868237&&e.getUint16(n+4)===1028}parse(){let{raw:e}=this,n=this.chunk.byteLength-1,i=!1;for(let r=0;r<n;r++)if(this.chunk.getUint8(r)===28&&this.chunk.getUint8(r+1)===2){i=!0;let s=this.chunk.getUint16(r+3),o=this.chunk.getUint8(r+2),a=this.chunk.getLatin1String(r+5,s);e.set(o,this.pluralizeValue(e.get(o),a)),r+=4+s}else if(i)break;return this.translate(),this.output}pluralizeValue(e,n){return e!==void 0?e instanceof Array?(e.push(n),e):[e,n]:n}};I(Ke,"type","iptc"),I(Ke,"translateValues",!1),I(Ke,"reviveValues",!1),P.set("iptc",Ke),D(U,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),D(Y,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);var eo=Du;l();l();l();var nt=class{constructor(e){if(Mu(e))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=e,this.byteLength=this.buffer.length}getUint8(e){return this.buffer.readUInt8(e)}getUint16(e,n){return n?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}getUint32(e,n){return n?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}getInt32(e,n){return n?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}};function Mu(t){return typeof t!="object"||t.length===void 0||t.readUInt8===void 0||t.readUInt16LE===void 0||t.readUInt16BE===void 0||t.readUInt32LE===void 0||t.readUInt32BE===void 0||t.readInt32LE===void 0||t.readInt32BE===void 0}function Pi(t,e,n){try{return new DataView(t,e,n)}catch{return new nt(t,e,n)}}function E(t,e,n){let i=[];for(let r=0;r<n&&e+r<t.byteLength;r++)i.push(t.getUint8(e+r));return ye(i)}function Se(t,e){let n=[],i=0;for(;e+i<t.byteLength;){let r=t.getUint8(e+i);if(r===0)break;n.push(r),i++}return ye(n)}function to(t,e,n){let i=[];for(let r=0;r<n&&e+r<t.byteLength;r+=2)i.push(t.getUint16(e+r));return i[i.length-1]===0&&i.pop(),ye(i)}function In(t,e){let n=t.getUint8(e),i=E(t,e+1,n);return[n,i]}function ye(t){return t.map(e=>String.fromCharCode(e)).join("")}function _(){for(let t=1;t<arguments.length;t++)for(let e in arguments[t])arguments[0][e]=arguments[t][e];return arguments[0]}function xn(t,e,n){let i=!1;Object.defineProperty(t,e,{get(){return i||(i=!0,Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n.apply(t),writable:!0})),t[e]},configurable:!0,enumerable:!0})}function _n(t){if(typeof btoa<"u")return btoa(typeof t=="string"?t:Array.prototype.reduce.call(new Uint8Array(t),(e,n)=>e+String.fromCharCode(n),""));if(!(typeof Buffer>"u"))return typeof Buffer.from<"u"?Buffer.from(t).toString("base64"):new Buffer(t).toString("base64")}function no(t){let e=t.substring(t.indexOf(",")+1);if(t.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(e),i=>i.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from<"u"?Buffer.from(e,"base64"):new Buffer(e,"base64");let n=decodeURIComponent(e);return typeof Buffer<"u"?typeof Buffer.from<"u"?Buffer.from(n):new Buffer(n):Uint8Array.from(n,i=>i.charCodeAt(0)).buffer}function io(t,e,n){return vi(n,e-t.length)+t}function ro(t,e){return parseInt(t.replace(".",""),e)/Math.pow(e,(t.split(".")[1]||"").length)}function vi(t,e){return new Array(e+1).join(t)}var it=void 0,Oi=0;function Tn(t,e,n,i="string"){if(e===Oi&&typeof DecompressionStream=="function"){let r=new DecompressionStream("deflate"),s=new Blob([t]).stream().pipeThrough(r);return i==="dataview"?new Response(s).arrayBuffer().then(o=>new DataView(o)):new Response(s).arrayBuffer().then(o=>new TextDecoder(n).decode(o))}return e!==void 0?Promise.reject(`Unknown compression method ${e}.`):t}l();var p={USE_FILE:!0,USE_JFIF:!0,USE_PNG_FILE:!0,USE_EXIF:!0,USE_IPTC:!0,USE_XMP:!0,USE_ICC:!0,USE_MPF:!0,USE_PHOTOSHOP:!0,USE_THUMBNAIL:!0,USE_TIFF:!0,USE_JPEG:!0,USE_PNG:!0,USE_HEIC:!0,USE_AVIF:!0,USE_WEBP:!0,USE_GIF:!0};l();function b(t){return t.map(e=>String.fromCharCode(e)).join("")}function Ft(t){if(t.length>=8){let e=b(t.slice(0,8));if(e==="ASCII\0\0\0")return b(t.slice(8));if(e==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(e==="UNICODE\0")return"[Unicode encoded text]";if(e==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function rt(t){return t[0][0]/t[0][1]+t[1][0]/t[1][1]/60+t[2][0]/t[2][1]/3600}l();l();l();var K={BIG_ENDIAN:19789,LITTLE_ENDIAN:18761,getByteOrder:Nu};function Nu(t,e){if(t.getUint16(e)===18761)return 18761;if(t.getUint16(e)===19789)return 19789;throw new Error("Illegal byte order value. Faulty image.")}var Mi={isTiffFile:wu,findTiffOffsets:Ru};function wu(t){return!!t&&t.byteLength>=4&&Uu(t)}function Uu(t){let i=t.getUint16(0)===K.LITTLE_ENDIAN;return t.getUint16(2,i)===42}function Ru(){return p.USE_EXIF?{hasAppMarkers:!0,tiffHeaderOffset:0}:{}}l();var wi={isJpegFile:qu,findJpegOffsets:Qu},ku=2,Lu=65496,so=2,W=4,B=2,Bu=2,Gu=10,Vu=18,oo=33,ao=79,uo=18,Hu=8,Ni="ICC_PROFILE\0",mo=W+Ni.length,ju=mo+1,lo="MPF\0",So=65472,yo=65474,zu=65476,Wu=65499,Xu=65501,Zu=65498,Co=65504,Ui=65505,Eo=65506,$u=65517,Yu=65519,Ku=65534,Ju=65535,co="JFIF",fo="Exif",ho="http://ns.adobe.com/xap/1.0/\0",po="http://ns.adobe.com/xmp/extension/\0",go="Photoshop 3.0";function qu(t){return!!t&&t.byteLength>=ku&&t.getUint16(0)===Lu}function Qu(t){let e=so,n,i,r,s,o,a,u,c,d;for(;e+W+5<=t.byteLength;){if(p.USE_FILE&&el(t,e))n=t.getUint16(e+B),i=e+B;else if(p.USE_FILE&&tl(t,e))n=t.getUint16(e+B),r=e+B;else if(p.USE_JFIF&&rl(t,e))n=t.getUint16(e+B),s=e+Bu;else if(p.USE_EXIF&&sl(t,e))n=t.getUint16(e+B),o=e+Gu;else if(p.USE_XMP&&ol(t,e))u||(u=[]),n=t.getUint16(e+B),u.push(cl(e,n));else if(p.USE_XMP&&ul(t,e))u||(u=[]),n=t.getUint16(e+B),u.push(dl(e,n));else if(p.USE_IPTC&&fl(t,e))n=t.getUint16(e+B),a=e+Vu;else if(p.USE_ICC&&nl(t,e)){n=t.getUint16(e+B);let h=e+uo,m=n-(uo-B),C=t.getUint8(e+mo),T=t.getUint8(e+ju);c||(c=[]),c.push({offset:h,length:m,chunkNumber:C,chunksTotal:T})}else if(p.USE_MPF&&il(t,e))n=t.getUint16(e+B),d=e+Hu;else if(hl(t,e))n=t.getUint16(e+B);else if(pl(t,e)){e++;continue}else break;e+=B+n}return{hasAppMarkers:e>so,fileDataOffset:i||r,jfifDataOffset:s,tiffHeaderOffset:o,iptcDataOffset:a,xmpChunks:u,iccChunks:c,mpfDataOffset:d}}function el(t,e){return t.getUint16(e)===So}function tl(t,e){return t.getUint16(e)===yo}function nl(t,e){let n=Ni.length;return t.getUint16(e)===Eo&&E(t,e+W,n)===Ni}function il(t,e){let n=lo.length;return t.getUint16(e)===Eo&&E(t,e+W,n)===lo}function rl(t,e){let n=co.length;return t.getUint16(e)===Co&&E(t,e+W,n)===co&&t.getUint8(e+W+n)===0}function sl(t,e){let n=fo.length;return t.getUint16(e)===Ui&&E(t,e+W,n)===fo&&t.getUint8(e+W+n)===0}function ol(t,e){return t.getUint16(e)===Ui&&al(t,e)}function al(t,e){let n=ho.length;return E(t,e+W,n)===ho}function ul(t,e){return t.getUint16(e)===Ui&&ll(t,e)}function ll(t,e){let n=po.length;return E(t,e+W,n)===po}function cl(t,e){return{dataOffset:t+oo,length:e-(oo-B)}}function dl(t,e){return{dataOffset:t+ao,length:e-(ao-B)}}function fl(t,e){let n=go.length;return t.getUint16(e)===$u&&E(t,e+W,n)===go&&t.getUint8(e+W+n)===0}function hl(t,e){let n=t.getUint16(e);return n>=Co&&n<=Yu||n===Ku||n===So||n===yo||n===zu||n===Wu||n===Xu||n===Zu}function pl(t,e){return t.getUint16(e)===Ju}l();var Li={isPngFile:Sl,findPngOffsets:yl},Ri=`\x89PNG\r

`,bn=4,X=4,Re=0,oe=bn,R=bn+X,ki="XML:com.adobe.xmp\0",An="tEXt",Ce="iTXt",Dt="zTXt",Bi="pHYs",Gi="tIME",gl="eXIf",ml="iCCP";function Sl(t){return!!t&&E(t,0,Ri.length)===Ri}function yl(t,e){let i={hasAppMarkers:!1},r=Ri.length;for(;r+bn+X<=t.byteLength;){if(p.USE_PNG_FILE&&Cl(t,r))i.hasAppMarkers=!0,i.pngHeaderOffset=r+R;else if(p.USE_XMP&&El(t,r)){let s=bl(t,r);s!==void 0&&(i.hasAppMarkers=!0,i.xmpChunks=[{dataOffset:s,length:t.getUint32(r+Re)-(s-(r+R))}])}else if(Il(t,r,e)){i.hasAppMarkers=!0;let s=E(t,r+oe,X);i.pngTextChunks||(i.pngTextChunks=[]),i.pngTextChunks.push({length:t.getUint32(r+Re),type:s,offset:r+R})}else if(xl(t,r))i.hasAppMarkers=!0,i.tiffHeaderOffset=r+R;else if(p.USE_ICC&&e&&_l(t,r)){i.hasAppMarkers=!0;let s=t.getUint32(r+Re),o=r+R,{profileName:a,compressionMethod:u,compressedProfileOffset:c}=Al(t,o);i.iccChunks||(i.iccChunks=[]),i.iccChunks.push({offset:c,length:s-(c-o),chunkNumber:1,chunksTotal:1,profileName:a,compressionMethod:u})}else Tl(t,r)&&(i.hasAppMarkers=!0,i.pngChunkOffsets||(i.pngChunkOffsets=[]),i.pngChunkOffsets.push(r+Re));r+=t.getUint32(r+Re)+bn+X+4}return i}function Cl(t,e){return E(t,e+oe,X)==="IHDR"}function El(t,e){return E(t,e+oe,X)===Ce&&E(t,e+R,ki.length)===ki}function Il(t,e,n){let i=E(t,e+oe,X);return i===An||i===Ce||i===Dt&&n}function xl(t,e){return E(t,e+oe,X)===gl}function _l(t,e){return E(t,e+oe,X)===ml}function Tl(t,e){let n=[Bi,Gi],i=E(t,e+oe,X);return n.includes(i)}function bl(t,e){e+=R+ki.length+1+1;let r=0;for(;r<2&&e<t.byteLength;)t.getUint8(e)===0&&r++,e++;if(!(r<2))return e}function Al(t,e){let r=Se(t,e);e+=r.length+1;let s=t.getUint8(e);return e+=1,{profileName:r,compressionMethod:s,compressedProfileOffset:e}}l();l();l();l();function Io(t,e){return t.getUint32(e+4)}function xo(t,e,n,i){let{offsets:s,sizes:o}=Fl(e,n+3),a=t.getUint8(s.offsetSize)>>4;o.item.extent.extentOffset=a;let u=t.getUint8(s.lengthSize)&15;o.item.extent.extentLength=u;let c=t.getUint8(s.baseOffsetSize)>>4;o.item.baseOffset=c;let d=Dl(t,s.indexSize,e);o.item.extent.extentIndex=d!==void 0?d:0;let h=Pl(t,s.itemCount,e);return{type:"iloc",items:vl(t,e,s,o,a,u,d,h),length:i}}function Fl(t,e){let n={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};t<2?(n.itemCount=2,n.item.itemId=2):t===2&&(n.itemCount=4,n.item.itemId=4),t===1||t===2?n.item.constructionMethod=2:n.item.constructionMethod=0;let i={offsetSize:e,lengthSize:e,baseOffsetSize:e+1,indexSize:e+1};return i.itemCount=e+2,i.items=i.itemCount+n.itemCount,i.item={itemId:0},i.item.constructionMethod=i.item.itemId+n.item.itemId,i.item.dataReferenceIndex=i.item.constructionMethod+n.item.constructionMethod,{offsets:i,sizes:n}}function Dl(t,e,n){if(n===1||n===2)return t.getUint8(e)&15}function Pl(t,e,n){if(n<2)return t.getUint16(e);if(n===2)return t.getUint32(e)}function vl(t,e,n,i,r,s,o,a){if(a===void 0)return[];let u=[],c=n.items;for(let d=0;d<a;d++){let h={extents:[]};h.itemId=Ol(t,c,e),c+=i.item.itemId,h.constructionMethod=e===1||e===2?t.getUint16(c)&15:void 0,c+=i.item.constructionMethod,h.dataReferenceIndex=t.getUint16(c),c+=i.item.dataReferenceIndex,h.baseOffset=Fn(t,c,i.item.baseOffset),c+=i.item.baseOffset,h.extentCount=t.getUint16(c),c+=i.item.extentCount;for(let m=0;m<h.extentCount;m++){let C={};C.extentIndex=Ml(t,e,c,o),c+=i.item.extent.extentIndex,C.extentOffset=Fn(t,c,r),c+=i.item.extent.extentOffset,C.extentLength=Fn(t,c,s),c+=i.item.extent.extentLength,h.extents.push(C)}u.push(h)}return u}function Ol(t,e,n){if(n<2)return t.getUint16(e);if(n===2)return t.getUint32(e)}function Ml(t,e,n,i){if((e===1||e===2)&&i>0)return Fn(t,n,i)}function Fn(t,e,n){return n===4?t.getUint32(e):n===8?(console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),Io(t,e)):0}var Nl=1718909296,wl=1768977008,Ul=1835365473,Rl=1768714083,kl=1768517222,Ll=1768842853,Bl=1768973167,Gl=1668246642,_o=1165519206,Hi=1835625829,Vl=1970432288;function st(t,e){let{length:s,contentOffset:o}=Hl(t,e);if(s<8)return;let a=t.getUint32(e+4);if(a===Nl)return Ql(t,o,s);if(a===wl)return ec(t,e,o,s);if(a===Bl)return tc(t,e,o,s);if(a===Gl)return nc(t,o,s);let u=t.getUint8(o);return a===Ul?rc(t,e,o+1,s):a===Rl?xo(t,u,o+1,s):a===kl?sc(t,e,u,o+1,s):a===Ll?ac(t,e,u,o+1,s):{type:void 0,length:s}}function Hl(t,e){let o=t.getUint32(e);return jl(o)?{length:t.byteLength-e,contentOffset:e+4+4}:zl(o)&&Wl(t,e)?{length:t.getUint32(e+12),contentOffset:e+4+4+8}:{length:o,contentOffset:e+4+4}}function jl(t){return t===0}function zl(t){return t===1}function Wl(t,e){return t.getUint32(e+8)===0}function Dn(t){if(p.USE_EXIF||p.USE_XMP||p.USE_ICC){let e={},n=Xl(t);return n?(p.USE_EXIF&&(e.tiffHeaderOffset=Zl(t,n)),p.USE_XMP&&(e.xmpChunks=Kl(n)),p.USE_ICC&&(e.iccChunks=ql(n)),e.hasAppMarkers=e.tiffHeaderOffset!==void 0||e.xmpChunks!==void 0||e.iccChunks!==void 0,e):{hasAppMarkers:!1}}return{}}function Xl(t){let i=0;for(;i+4+4<=t.byteLength;){let r=st(t,i);if(r===void 0)break;if(r.type==="meta")return r;i+=r.length}}function Zl(t,e){try{let n=$l(e).itemId,i=Vi(e,n),r=i.baseOffset+i.extents[0].extentOffset;return Yl(t,r)}catch{return}}function $l(t){return t.subBoxes.find(e=>e.type==="iinf").itemInfos.find(e=>e.itemType===_o)}function Vi(t,e){return t.subBoxes.find(n=>n.type==="iloc").items.find(n=>n.itemId===e)}function Yl(t,e){return e+4+t.getUint32(e)}function Kl(t){try{let e=Jl(t).itemId,n=Vi(t,e),i=Vi(t,e).extents[0];return[{dataOffset:n.baseOffset+i.extentOffset,length:i.extentLength}]}catch{return}}function Jl(t){return t.subBoxes.find(e=>e.type==="iinf").itemInfos.find(e=>e.itemType===Hi&&e.contentType==="application/rdf+xml")}function ql(t){try{let e=t.subBoxes.find(n=>n.type==="iprp").subBoxes.find(n=>n.type==="ipco").properties.find(n=>n.type==="colr").icc;if(e)return[e]}catch{}}function Ql(t,e,n){return{type:"ftyp",majorBrand:E(t,e,4),length:n}}function ec(t,e,n,i){return{type:"iprp",subBoxes:Pn(t,n,i-(n-e)),length:i}}function tc(t,e,n,i){return{type:"ipco",properties:Pn(t,n,i-(n-e)),length:i}}function nc(t,e,n){return{type:"colr",icc:ic(t,e),length:n}}function ic(t,e){let i=E(t,e,4);if(!(i!=="prof"&&i!=="rICC"))return{offset:e+4,length:t.getUint32(e+4),chunkNumber:1,chunksTotal:1}}function rc(t,e,n,i){return{type:"meta",subBoxes:Pn(t,n+3,i-(n+3-e)),length:i}}function Pn(t,e,n){let i=[_o,Hi],r=[],s=e;for(;s<e+n;){let o=st(t,s);if(o===void 0)break;o.type!==void 0&&(o.itemType===void 0||i.indexOf(o.itemType)!==-1)&&r.push(o),s+=o.length}return r}function sc(t,e,n,i,r){let{offsets:s}=oc(n,i);return{type:"iinf",itemInfos:Pn(t,s.itemInfos,r-(s.itemInfos-e)),length:r}}function oc(t,e){let i={entryCount:e+3},r={};return t===0?r.entryCount=2:r.entryCount=4,i.itemInfos=i.entryCount+r.entryCount,{offsets:i}}function ac(t,e,n,i,r){i+=3;let o={type:"infe",length:r};return(n===0||n===1)&&(o.itemId=t.getUint16(i),i+=2,o.itemProtectionIndex=t.getUint16(i),i+=2,o.itemName=Se(t,i),i+=o.itemName.length+1),n>=2&&(n===2?(o.itemId=t.getUint16(i),i+=2):n===3&&(o.itemId=t.getUint32(i),i+=4),o.itemProtectionIndex=t.getUint16(i),i+=2,o.itemType=t.getUint32(i),i+=4,o.itemName=Se(t,i),i+=o.itemName.length+1,o.itemType===Hi?(o.contentType=Se(t,i),i+=o.contentType.length+1,e+r>i&&(o.contentEncoding=Se(t,i),i+=o.contentEncoding.length+1)):o.itemType===Vl&&(o.itemUri=Se(t,i),i+=o.itemUri.length+1)),o}var ji={isHeicFile:uc,findHeicOffsets:lc};function uc(t){if(!t)return!1;let e=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"];try{let n=st(t,0);return n&&e.indexOf(n.majorBrand)!==-1}catch{return!1}}function lc(t){return Dn(t)}l();var zi={isAvifFile:cc,findAvifOffsets:dc};function cc(t){if(!t)return!1;try{let e=st(t,0);return e&&e.majorBrand==="avif"}catch{return!1}}function dc(t){return Dn(t)}l();var Wi={isWebpFile:fc,findOffsets:hc};function fc(t){let n="RIFF",r="WEBP";return!!t&&E(t,0,n.length)===n&&E(t,8,r.length)===r}function hc(t){let i="Exif\0\0",s=12,o=!1,a,u,c,d;for(;s+8<t.byteLength;){let h=E(t,s,4),m=t.getUint32(s+4,!0);p.USE_EXIF&&h==="EXIF"?(o=!0,E(t,s+8,i.length)===i?a=s+8+i.length:a=s+8):p.USE_XMP&&h==="XMP "?(o=!0,u=[{dataOffset:s+8,length:m}]):p.USE_ICC&&h==="ICCP"?(o=!0,c=[{offset:s+8,length:m,chunkNumber:1,chunksTotal:1}]):h==="VP8X"&&(o=!0,d=s+8),s+=8+(m%2===0?m:m+1)}return{hasAppMarkers:o,tiffHeaderOffset:a,xmpChunks:u,iccChunks:c,vp8xChunkOffset:d}}l();var Xi={isGifFile:mc,findOffsets:Sc},pc=6,gc=["GIF87a","GIF89a"];function mc(t){return!!t&&gc.includes(E(t,0,pc))}function Sc(){return{gifHeaderOffset:0}}l();var Zi={isXMLFile:yc,findOffsets:Cc},bo=0,To="<?xpacket begin";function yc(t){return!!t&&E(t,bo,To.length)===To}function Cc(t){let e=[];return e.push({dataOffset:bo,length:t.byteLength}),{xmpChunks:e}}var Ao={parseAppMarkers:Ec};function Ec(t,e){if(p.USE_TIFF&&Mi.isTiffFile(t))return Ee(Mi.findTiffOffsets(),"tiff","TIFF");if(p.USE_JPEG&&wi.isJpegFile(t))return Ee(wi.findJpegOffsets(t),"jpeg","JPEG");if(p.USE_PNG&&Li.isPngFile(t))return Ee(Li.findPngOffsets(t,e),"png","PNG");if(p.USE_HEIC&&ji.isHeicFile(t))return Ee(ji.findHeicOffsets(t),"heic","HEIC");if(p.USE_AVIF&&zi.isAvifFile(t))return Ee(zi.findAvifOffsets(t),"avif","AVIF");if(p.USE_WEBP&&Wi.isWebpFile(t))return Ee(Wi.findOffsets(t),"webp","WebP");if(p.USE_GIF&&Xi.isGifFile(t))return Ee(Xi.findOffsets(t),"gif","GIF");if(p.USE_XMP&&Zi.isXMLFile(t))return Ee(Zi.findOffsets(t),"xml","XML");throw new Error("Invalid image format")}function Ee(t,e,n){return _({},t,{fileType:{value:e,description:n}})}l();l();l();l();var x={ApertureValue:t=>Math.pow(Math.sqrt(2),t[0]/t[1]).toFixed(2),ColorSpace(t){return t===1?"sRGB":t===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(t){return t.map(e=>{if(e===49)return"Y";if(e===50)return"Cb";if(e===51)return"Cr";if(e===52)return"R";if(e===53)return"G";if(e===54)return"B"}).join("")},Contrast(t){return t===0?"Normal":t===1?"Soft":t===2?"Hard":"Unknown"},CustomRendered(t){return t===0?"Normal process":t===1?"Custom process":"Unknown"},ExposureMode(t){return t===0?"Auto exposure":t===1?"Manual exposure":t===2?"Auto bracket":"Unknown"},ExposureProgram(t){return t===0?"Undefined":t===1?"Manual":t===2?"Normal program":t===3?"Aperture priority":t===4?"Shutter priority":t===5?"Creative program":t===6?"Action program":t===7?"Portrait mode":t===8?"Landscape mode":t===9?"Bulb":"Unknown"},ExposureTime(t){if(t[0]/t[1]>.25){let e=t[0]/t[1];return Number.isInteger(e)?""+e:e.toFixed(1)}return t[0]!==0?`1/${Math.round(t[1]/t[0])}`:`0/${t[1]}`},FNumber:t=>`f/${t[0]/t[1]}`,FocalLength:t=>t[0]/t[1]+" mm",FocalPlaneResolutionUnit(t){return t===2?"inches":t===3?"centimeters":"Unknown"},LightSource:t=>t===1?"Daylight":t===2?"Fluorescent":t===3?"Tungsten (incandescent light)":t===4?"Flash":t===9?"Fine weather":t===10?"Cloudy weather":t===11?"Shade":t===12?"Daylight fluorescent (D 5700 \u2013 7100K)":t===13?"Day white fluorescent (N 4600 \u2013 5400K)":t===14?"Cool white fluorescent (W 3900 \u2013 4500K)":t===15?"White fluorescent (WW 3200 \u2013 3700K)":t===17?"Standard light A":t===18?"Standard light B":t===19?"Standard light C":t===20?"D55":t===21?"D65":t===22?"D75":t===23?"D50":t===24?"ISO studio tungsten":t===255?"Other light source":"Unknown",MeteringMode(t){return t===1?"Average":t===2?"CenterWeightedAverage":t===3?"Spot":t===4?"MultiSpot":t===5?"Pattern":t===6?"Partial":t===255?"Other":"Unknown"},ResolutionUnit(t){return t===2?"inches":t===3?"centimeters":"Unknown"},Saturation(t){return t===0?"Normal":t===1?"Low saturation":t===2?"High saturation":"Unknown"},SceneCaptureType(t){return t===0?"Standard":t===1?"Landscape":t===2?"Portrait":t===3?"Night scene":"Unknown"},Sharpness(t){return t===0?"Normal":t===1?"Soft":t===2?"Hard":"Unknown"},ShutterSpeedValue(t){let e=Math.pow(2,t[0]/t[1]);return e<=1?`${Math.round(1/e)}`:`1/${Math.round(e)}`},WhiteBalance(t){return t===0?"Auto white balance":t===1?"Manual white balance":"Unknown"},XResolution:t=>""+Math.round(t[0]/t[1]),YResolution:t=>""+Math.round(t[0]/t[1])};var $i={11:"ProcessingSoftware",254:{name:"SubfileType",description:t=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[t]||"Unknown"},255:{name:"OldSubfileType",description:t=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[t]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:t=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[t]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:t=>({1:"Normal",2:"Reversed"})[t]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:t=>t===1?"top-left":t===2?"top-right":t===3?"bottom-right":t===4?"bottom-left":t===5?"left-top":t===6?"right-top":t===7?"right-bottom":t===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:x.XResolution},283:{name:"YResolution",description:x.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:t=>""+Math.round(t[0]/t[1])},287:{name:"YPosition",description:t=>""+Math.round(t[0]/t[1])},290:{name:"GrayResponseUnit",description:t=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[t]||"Unknown"},296:{name:"ResolutionUnit",description:x.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:t=>t.map(e=>`${e[0]}/${e[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:t=>t.map(e=>`${e[0]}/${e[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:t=>({1:"CMYK",2:"Not CMYK"})[t]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:t=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[t]||"Unknown"},339:{name:"SampleFormat",description:t=>{let e={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(t)?t.map(n=>e[n]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:t=>t.map(e=>""+e[0]/e[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:t=>t===1?"centered":t===2?"co-sited":"undefined "+t},532:{name:"ReferenceBlackWhite",description:t=>t.map(e=>""+e[0]/e[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:t=>t.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:t=>({0:"Unsafe",1:"Safe"})[t]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:x.LightSource},50779:{name:"CalibrationIlluminant2",description:x.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:t=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[t]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:t=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[t]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:t=>({0:"Linear",1:"sRGB"})[t]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:t=>({0:"Linear",1:"sRGB"})[t]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:t=>({0:"Auto",1:"None"})[t]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};l();var Fo={33434:{name:"ExposureTime",description:x.ExposureTime},33437:{name:"FNumber",description:x.FNumber},34850:{name:"ExposureProgram",description:x.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:t=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[t]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:t=>b(t)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:x.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:x.ShutterSpeedValue},37378:{name:"ApertureValue",description:x.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:t=>Math.pow(Math.sqrt(2),t[0]/t[1]).toFixed(2)},37382:{name:"SubjectDistance",description:t=>t[0]/t[1]+" m"},37383:{name:"MeteringMode",description:x.MeteringMode},37384:{name:"LightSource",description:x.LightSource},37385:{name:"Flash",description:t=>t===0?"Flash did not fire":t===1?"Flash fired":t===5?"Strobe return light not detected":t===7?"Strobe return light detected":t===9?"Flash fired, compulsory flash mode":t===13?"Flash fired, compulsory flash mode, return light not detected":t===15?"Flash fired, compulsory flash mode, return light detected":t===16?"Flash did not fire, compulsory flash mode":t===24?"Flash did not fire, auto mode":t===25?"Flash fired, auto mode":t===29?"Flash fired, auto mode, return light not detected":t===31?"Flash fired, auto mode, return light detected":t===32?"No flash function":t===65?"Flash fired, red-eye reduction mode":t===69?"Flash fired, red-eye reduction mode, return light not detected":t===71?"Flash fired, red-eye reduction mode, return light detected":t===73?"Flash fired, compulsory flash mode, red-eye reduction mode":t===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":t===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":t===89?"Flash fired, auto mode, red-eye reduction mode":t===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":t===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:x.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:t=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[t]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:t=>t.length===2?`Location; X: ${t[0]}, Y: ${t[1]}`:t.length===3?`Circle; X: ${t[0]}, Y: ${t[1]}, diameter: ${t[2]}`:t.length===4?`Rectangle; X: ${t[0]}, Y: ${t[1]}, width: ${t[2]}, height: ${t[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Ft},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:t=>t[0]/t[1]+" \xB0C"},37889:{name:"Humidity",description:t=>t[0]/t[1]+" %"},37890:{name:"Pressure",description:t=>t[0]/t[1]+" hPa"},37891:{name:"WaterDepth",description:t=>t[0]/t[1]+" m"},37892:{name:"Acceleration",description:t=>t[0]/t[1]+" mGal"},37893:{name:"CameraElevationAngle",description:t=>t[0]/t[1]+" \xB0"},40960:{name:"FlashpixVersion",description:t=>t.map(e=>String.fromCharCode(e)).join("")},40961:{name:"ColorSpace",description:x.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:x.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([t,e])=>`X: ${t}, Y: ${e}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:t=>t===1?"Undefined":t===2?"One-chip color area sensor":t===3?"Two-chip color area sensor":t===4?"Three-chip color area sensor":t===5?"Color sequential area sensor":t===7?"Trilinear sensor":t===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:t=>t===3?"DSC":"Unknown"},41729:{name:"SceneType",description:t=>t===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:x.CustomRendered},41986:{name:"ExposureMode",description:x.ExposureMode},41987:{name:"WhiteBalance",description:x.WhiteBalance},41988:{name:"DigitalZoomRatio",description:t=>t[0]===0?"Digital zoom was not used":""+t[0]/t[1]},41989:{name:"FocalLengthIn35mmFilm",description:t=>t===0?"Unknown":t},41990:{name:"SceneCaptureType",description:x.SceneCaptureType},41991:{name:"GainControl",description:t=>t===0?"None":t===1?"Low gain up":t===2?"High gain up":t===3?"Low gain down":t===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:x.Contrast},41993:{name:"Saturation",description:x.Saturation},41994:{name:"Sharpness",description:x.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:t=>t===1?"Macro":t===2?"Close view":t===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:t=>{let e=parseFloat((t[0][0]/t[0][1]).toFixed(5)),n=parseFloat((t[1][0]/t[1][1]).toFixed(5)),i=`${e}-${n} mm`;if(t[3][1]===0)return`${i} f/?`;let r=1/(t[2][1]/t[2][1]/(t[3][0]/t[3][1]));return`${i} f/${parseFloat(r.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:t=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[t]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"};l();var Do={0:{name:"GPSVersionID",description:t=>t[0]===2&&t[1]===2&&t[2]===0&&t[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:t=>{let e=t.join("");return e==="N"?"North latitude":e==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:rt},3:{name:"GPSLongitudeRef",description:t=>{let e=t.join("");return e==="E"?"East longitude":e==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:rt},5:{name:"GPSAltitudeRef",description:t=>t===0?"Sea level":t===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:t=>t[0]/t[1]+" m"},7:{name:"GPSTimeStamp",description:t=>t.map(([e,n])=>{let i=e/n;return/^\d(\.|$)/.test(`${i}`)?`0${i}`:i}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:t=>{let e=t.join("");return e==="A"?"Measurement in progress":e==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:t=>{let e=t.join("");return e==="2"?"2-dimensional measurement":e==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:t=>{let e=t.join("");return e==="K"?"Kilometers per hour":e==="M"?"Miles per hour":e==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:t=>{let e=t.join("");return e==="T"?"True direction":e==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:t=>{let e=t.join("");return e==="T"?"True direction":e==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:t=>{let e=t.join("");return e==="N"?"North latitude":e==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:t=>t[0][0]/t[0][1]+t[1][0]/t[1][1]/60+t[2][0]/t[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:t=>{let e=t.join("");return e==="E"?"East longitude":e==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:t=>t[0][0]/t[0][1]+t[1][0]/t[1][1]/60+t[2][0]/t[2][1]/3600},23:{name:"GPSDestBearingRef",description:t=>{let e=t.join("");return e==="T"?"True direction":e==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:t=>{let e=t.join("");return e==="K"?"Kilometers":e==="M"?"Miles":e==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Ft},28:{name:"GPSAreaInformation",description:Ft},29:"GPSDateStamp",30:{name:"GPSDifferential",description:t=>t===0?"Measurement without differential correction":t===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"};l();var Po={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:t=>b(t)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"};l();var vo={45056:{name:"MPFVersion",description:t=>b(t)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"};var Oo=_({},$i,Fo),Pt="0th",Yi="1st",Ki="exif",Ji="gps",qi="interoperability",Qi="mpf",ae={[Pt]:Oo,[Yi]:$i,[Ki]:Oo,[Ji]:Do,[qi]:Po,[Qi]:p.USE_MPF?vo:{}};l();l();var Mo={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},er={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},f={getAsciiValue:Ic,getByteAt:No,getAsciiAt:xc,getShortAt:_c,getLongAt:vn,getRationalAt:Tc,getUndefinedAt:bc,getSlongAt:tr,getSrationalAt:Ac,getIfdPointerAt:Fc,typeSizes:Mo,tagTypes:er,getTypeSize:Dc};function Ic(t){return t.map(e=>String.fromCharCode(e))}function No(t,e){return t.getUint8(e)}function xc(t,e){return t.getUint8(e)}function _c(t,e,n){return t.getUint16(e,n===K.LITTLE_ENDIAN)}function vn(t,e,n){return t.getUint32(e,n===K.LITTLE_ENDIAN)}function Tc(t,e,n){return[vn(t,e,n),vn(t,e+4,n)]}function bc(t,e){return No(t,e)}function tr(t,e,n){return t.getInt32(e,n===K.LITTLE_ENDIAN)}function Ac(t,e,n){return[tr(t,e,n),tr(t,e+4,n)]}function Fc(t,e,n){return vn(t,e,n)}function Dc(t){if(er[t]===void 0)throw new Error("No such type found.");return Mo[er[t]]}var Pc={1:f.getByteAt,2:f.getAsciiAt,3:f.getShortAt,4:f.getLongAt,5:f.getRationalAt,7:f.getUndefinedAt,9:f.getSlongAt,10:f.getSrationalAt,13:f.getIfdPointerAt};function On(t,e,n){return e+f.getLongAt(t,e+4,n)}function Ie(t,e,n,i,r,s){let o=f.getTypeSize("SHORT"),a=12,u={},c=vc(t,i,r);i+=o;for(let d=0;d<c&&!(i+a>t.byteLength);d++){let h=Oc(t,e,n,i,r,s);h!==void 0&&(u[h.name]={id:h.id,value:h.value,description:h.description}),i+=a}if(p.USE_THUMBNAIL&&i<t.byteLength-f.getTypeSize("LONG")){let d=f.getLongAt(t,i,r);d!==0&&e===Pt&&(u.Thumbnail=Ie(t,Yi,n,n+d,r,!0))}return u}function vc(t,e,n){return e+f.getTypeSize("SHORT")<=t.byteLength?f.getShortAt(t,e,n):0}function Oc(t,e,n,i,r,s){let a=f.getTypeSize("SHORT"),u=a+f.getTypeSize("SHORT"),c=u+f.getTypeSize("LONG"),d=f.getShortAt(t,i,r),h=f.getShortAt(t,i+a,r),m=f.getLongAt(t,i+u,r),C;if(f.typeSizes[h]===void 0||!s&&ae[e][d]===void 0)return;if(Mc(h,m))C=wo(t,i+c,h,m,r);else{let L=f.getLongAt(t,i+c,r);if(Nc(t,n,L,h,m)){let z=d===33723;C=wo(t,n+L,h,m,r,z)}else C="<faulty value>"}h===f.tagTypes.ASCII&&(C=wc(C),C=Uc(C));let T=`undefined-${d}`,M=C;if(ae[e][d]!==void 0)if(ae[e][d].name!==void 0&&ae[e][d].description!==void 0){T=ae[e][d].name;try{M=ae[e][d].description(C)}catch{M=Uo(C)}}else h===f.tagTypes.RATIONAL||h===f.tagTypes.SRATIONAL?(T=ae[e][d],M=""+C[0]/C[1]):(T=ae[e][d],M=Uo(C));return{id:d,name:T,value:C,description:M}}function Mc(t,e){return f.typeSizes[t]*e<=f.getTypeSize("LONG")}function wo(t,e,n,i,r,s=!1){let o=[];s&&(i=i*f.typeSizes[n],n=f.tagTypes.BYTE);for(let a=0;a<i;a++)o.push(Pc[n](t,e,r)),e+=f.typeSizes[n];return n===f.tagTypes.ASCII?o=f.getAsciiValue(o):o.length===1&&(o=o[0]),o}function Nc(t,e,n,i,r){return e+n+f.typeSizes[i]*r<=t.byteLength}function wc(t){let e=[],n=0;for(let i=0;i<t.length;i++){if(t[i]==="\0"){n++;continue}e[n]===void 0&&(e[n]=""),e[n]+=t[i]}return e}function Uc(t){try{return t.map(e=>decodeURIComponent(escape(e)))}catch{return t}}function Uo(t){return t instanceof Array?t.join(", "):t}var Ro="Exif IFD Pointer",ko="GPS Info IFD Pointer",Lo="Interoperability IFD Pointer",Mn={read:Rc};function Rc(t,e,n){let i=K.getByteOrder(t,e),r=kc(t,e,i,n);return r=Lc(r,t,e,i,n),r=Bc(r,t,e,i,n),r=Gc(r,t,e,i,n),r}function kc(t,e,n,i){return Ie(t,Pt,e,On(t,e,n),n,i)}function Lc(t,e,n,i,r){return t[Ro]!==void 0?_(t,Ie(e,Ki,n,n+t[Ro].value,i,r)):t}function Bc(t,e,n,i,r){return t[ko]!==void 0?_(t,Ie(e,Ji,n,n+t[ko].value,i,r)):t}function Gc(t,e,n,i,r){return t[Lo]!==void 0?_(t,Ie(e,qi,n,n+t[Lo].value,i,r)):t}l();var Bo={read:Vc},ot=16;function Vc(t,e,n){let i=K.getByteOrder(t,e),r=Ie(t,Qi,e,On(t,e,i),i,n);return Hc(t,e,r,i)}function Hc(t,e,n,i){if(!n.MPEntry)return n;let r=[];for(let s=0;s<Math.ceil(n.MPEntry.value.length/ot);s++){r[s]={};let o=vt(n.MPEntry.value,s*ot,f.getTypeSize("LONG"),i);r[s].ImageFlags=jc(o),r[s].ImageFormat=zc(o),r[s].ImageType=Wc(o);let a=vt(n.MPEntry.value,s*ot+4,f.getTypeSize("LONG"),i);r[s].ImageSize={value:a,description:""+a};let u=Xc(s,n.MPEntry,i,e);r[s].ImageOffset={value:u,description:""+u};let c=vt(n.MPEntry.value,s*ot+12,f.getTypeSize("SHORT"),i);r[s].DependentImage1EntryNumber={value:c,description:""+c};let d=vt(n.MPEntry.value,s*ot+14,f.getTypeSize("SHORT"),i);r[s].DependentImage2EntryNumber={value:d,description:""+d},r[s].image=t.buffer.slice(u,u+a),xn(r[s],"base64",function(){return _n(this.image)})}return n.Images=r,n}function vt(t,e,n,i){if(i===K.LITTLE_ENDIAN){let s=0;for(let o=0;o<n;o++)s+=t[e+o]<<8*o;return s}let r=0;for(let s=0;s<n;s++)r+=t[e+s]<<8*(n-1-s);return r}function jc(t){let e=[t>>31&1,t>>30&1,t>>29&1],n=[];return e[0]&&n.push("Dependent Parent Image"),e[1]&&n.push("Dependent Child Image"),e[2]&&n.push("Representative Image"),{value:e,description:n.join(", ")||"None"}}function zc(t){let e=t>>24&7;return{value:e,description:e===0?"JPEG":"Unknown"}}function Wc(t){let e=t&16777215;return{value:e,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[e]||"Unknown"}}function Xc(t,e,n,i){return Zc(t)?0:vt(e.value,t*ot+8,f.getTypeSize("LONG"),n)+i}function Zc(t){return t===0}l();var Go={read:$c};function $c(t,e){let n=Yc(t,e),i=Qc(t,e,n);return{"Bits Per Sample":Kc(t,e,n),"Image Height":Jc(t,e,n),"Image Width":qc(t,e,n),"Color Components":i,Subsampling:i&&ed(t,e,i.value,n)}}function Yc(t,e){return f.getShortAt(t,e)}function Kc(t,e,n){if(3>n)return;let s=f.getByteAt(t,e+2);return{value:s,description:""+s}}function Jc(t,e,n){if(5>n)return;let s=f.getShortAt(t,e+3);return{value:s,description:`${s}px`}}function qc(t,e,n){if(7>n)return;let s=f.getShortAt(t,e+5);return{value:s,description:`${s}px`}}function Qc(t,e,n){if(8>n)return;let s=f.getByteAt(t,e+7);return{value:s,description:""+s}}function ed(t,e,n,i){if(8+3*n>i)return;let o=[];for(let a=0;a<n;a++){let u=e+8+a*3;o.push([f.getByteAt(t,u),f.getByteAt(t,u+1),f.getByteAt(t,u+2)])}return{value:o,description:o.length>1?td(o)+nd(o):""}}function td(t){let e={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return t.map(n=>e[n[0]]).join("")}function nd(t){let e={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return t.length===0||t[0][1]===void 0||e[t[0][1]]===void 0?"":e[t[0][1]]}l();var Vo={read:id};function id(t,e){let n=rd(t,e),i=cd(t,e,n),r=dd(t,e,n),s={"JFIF Version":sd(t,e,n),"Resolution Unit":od(t,e,n),XResolution:ud(t,e,n),YResolution:ld(t,e,n),"JFIF Thumbnail Width":i,"JFIF Thumbnail Height":r};if(i!==void 0&&r!==void 0){let o=fd(t,e,3*i.value*r.value,n);o&&(s["JFIF Thumbnail"]=o)}for(let o in s)s[o]===void 0&&delete s[o];return s}function rd(t,e){return f.getShortAt(t,e)}function sd(t,e,n){if(9>n)return;let s=f.getByteAt(t,e+7),o=f.getByteAt(t,e+7+1);return{value:s*256+o,description:s+"."+o}}function od(t,e,n){if(10>n)return;let s=f.getByteAt(t,e+9);return{value:s,description:ad(s)}}function ad(t){return t===0?"None":t===1?"inches":t===2?"cm":"Unknown"}function ud(t,e,n){if(12>n)return;let s=f.getShortAt(t,e+10);return{value:s,description:""+s}}function ld(t,e,n){if(14>n)return;let s=f.getShortAt(t,e+12);return{value:s,description:""+s}}function cd(t,e,n){if(15>n)return;let s=f.getByteAt(t,e+14);return{value:s,description:`${s}px`}}function dd(t,e,n){if(16>n)return;let s=f.getByteAt(t,e+15);return{value:s,description:`${s}px`}}function fd(t,e,n,i){return n===0||16+n>i?void 0:{value:t.buffer.slice(e+16,e+16+n),description:"<24-bit RGB pixel data>"}}l();l();var ue={iptc:{256:{name:"Model Version",description:t=>((t[0]<<8)+t[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:t=>((t[0]<<8)+t[1]).toString()},278:{name:"File Format Version",description:t=>((t[0]<<8)+t[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:nr},336:{name:"Time Sent",description:ir},346:{name:"Coded Character Set",description:Ho,encoding_name:Ho},356:"UNO",376:{name:"ARM Identifier",description:t=>((t[0]<<8)+t[1]).toString()},378:{name:"ARM Version",description:t=>((t[0]<<8)+t[1]).toString()},512:{name:"Record Version",description:t=>((t[0]<<8)+t[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:t=>b(t)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:t=>{let e=b(t).split(":");return e[2]+(e[3]?"/"+e[3]:"")+(e[4]?"/"+e[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:t=>{let e=b(t);return e==="01"?"Object Kill":e==="02"?"Object Replace":e==="03"?"Object Append":e==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:nr},572:{name:"Time Created",description:ir},574:{name:"Digital Creation Date",description:nr},575:{name:"Digital Creation Time",description:ir},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:t=>{let e=b(t);return e==="a"?"morning":e==="p"?"evening":e==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:t=>t},642:"Image Type",643:{name:"Image Orientation",description:t=>{let e=b(t);return e==="P"?"Portrait":e==="L"?"Landscape":e==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:t=>{let e=b(t),n=e.charAt(0),i=e.charAt(1),r="";return n==="1"?r+="Mono":n==="2"&&(r+="Stereo"),i==="A"?r+=", actuality":i==="C"?r+=", question and answer session":i==="M"?r+=", music, transmitted by itself":i==="Q"?r+=", response to a question":i==="R"?r+=", raw sound":i==="S"?r+=", scener":i==="V"?r+=", voicer":i==="W"&&(r+=", wrap"),r!==""?r:e}},663:{name:"Audio Sampling Rate",description:t=>parseInt(b(t),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:t=>{let e=parseInt(b(t),10);return e+(e===1?" bit":" bits")}},665:{name:"Audio Duration",description:t=>{let e=b(t);return e.length>=6?e.substr(0,2)+":"+e.substr(2,2)+":"+e.substr(4,2):e}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:t=>t.length===2?"ObjectData Preview File Format":"Record 2 destination",description:t=>{if(t.length===2){let e=(t[0]<<8)+t[1];return e===0?"No ObjectData":e===1?"IPTC-NAA Digital Newsphoto Parameter Record":e===2?"IPTC7901 Recommended Message Format":e===3?"Tagged Image File Format (Adobe/Aldus Image data)":e===4?"Illustrator (Adobe Graphics data)":e===5?"AppleSingle (Apple Computer Inc)":e===6?"NAA 89-3 (ANPA 1312)":e===7?"MacBinary II":e===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":e===9?"United Press International ANPA 1312 variant":e===10?"United Press International Down-Load Message":e===11?"JPEG File Interchange (JFIF)":e===12?"Photo-CD Image-Pac (Eastman Kodak)":e===13?"Microsoft Bit Mapped Graphics File [*.BMP]":e===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":e===15?"Audio plus Moving Video [*.AVI] (Microsoft)":e===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":e===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":e===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":e===19?"RIFF Wave (Microsoft Corporation)":e===20?"Freehand (Macromedia/Aldus)":e===21?'Hypertext Markup Language "HTML" (The Internet Society)':e===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":e===23?"MPEG 2 Audio Layer 3, ISO/IEC":e===24?"Portable Document File (*.PDF) Adobe":e===25?"News Industry Text Format (NITF)":e===26?"Tape Archive (*.TAR)":e===27?"Tidningarnas Telegrambyr\xE5 NITF version (TTNITF DTD)":e===28?"Ritzaus Bureau NITF version (RBNITF DTD)":e===29?"Corel Draw [*.CDR]":`Unknown format ${e}`}return b(t)}},713:{name:"ObjectData Preview File Format Version",description:(t,e)=>{let n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},i=b(t);if(e["ObjectData Preview File Format"]){let r=b(e["ObjectData Preview File Format"].value);if(n[r]&&n[r][i])return n[r][i]}return i}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:t=>t[0].toString()},1812:{name:"Max Subfile Size",description:t=>{let e=0;for(let n=0;n<t.length;n++)e=(e<<8)+t[n];return e.toString()}},1882:{name:"ObjectData Size Announced",description:t=>{let e=0;for(let n=0;n<t.length;n++)e=(e<<8)+t[n];return e.toString()}},1887:{name:"Maximum ObjectData Size",description:t=>{let e=0;for(let n=0;n<t.length;n++)e=(e<<8)+t[n];return e.toString()}}}};function nr(t){let e=b(t);return e.length>=8?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2):e}function ir(t){let e=b(t),n=e;return e.length>=6&&(n=e.substr(0,2)+":"+e.substr(2,2)+":"+e.substr(4,2),e.length===11&&(n+=e.substr(6,1)+e.substr(7,2)+":"+e.substr(9,2))),n}function Ho(t){let e=b(t);return e==="\x1B%G"?"UTF-8":e==="\x1B%5"?"Windows-1252":e==="\x1B%/G"?"UTF-8 Level 1":e==="\x1B%/H"?"UTF-8 Level 2":e==="\x1B%/I"?"UTF-8 Level 3":e==="\x1B/A"?"ISO-8859-1":e==="\x1B/B"?"ISO-8859-2":e==="\x1B/C"?"ISO-8859-3":e==="\x1B/D"?"ISO-8859-4":e==="\x1B/@"?"ISO-8859-5":e==="\x1B/G"?"ISO-8859-6":e==="\x1B/F"?"ISO-8859-7":e==="\x1B/H"?"ISO-8859-8":"Unknown"}l();l();var jo={get:hd};function hd(){if(typeof TextDecoder<"u")return TextDecoder}var pd=5,Nn={decode:gd,TAG_HEADER_SIZE:pd};function gd(t,e){let n=jo.get();if(typeof n<"u"&&t!==void 0)try{return new n(t).decode(e instanceof DataView?e.buffer:Uint8Array.from(e))}catch{}let i=e.map(r=>String.fromCharCode(r)).join("");return md(i)}function md(t){try{return decodeURIComponent(escape(t))}catch{return t}}var Sd=943868237,Wo=4,rr=Wo+8,yd=1028,Xo=5,Ot={read:Cd};function Cd(t,e,n){try{if(Array.isArray(t))return zo(new DataView(Uint8Array.from(t).buffer),{size:t.length},0,n);let{naaBlock:i,dataOffset:r}=Ed(t,e);return zo(t,i,r,n)}catch{return{}}}function Ed(t,e){for(;e+rr<=t.byteLength;){let n=Id(t,e);if(xd(n))return{naaBlock:n,dataOffset:e+rr};e+=rr+n.size+_d(n)}throw new Error("No IPTC NAA resource block.")}function Id(t,e){if(t.getUint32(e,!1)!==Sd)throw new Error("Not an IPTC resource block.");return{type:t.getUint16(e+Wo),size:t.getUint16(e+10)}}function xd(t){return t.type===yd}function _d(t){return t.size%2!==0?1:0}function zo(t,e,n,i){let r={},s,o=n+e.size;for(;n<o&&n<t.byteLength;){let{tag:a,tagSize:u}=Td(t,n,r,s,i);if(a===null)break;a&&("encoding"in a&&(s=a.encoding),r[a.name]===void 0||a.repeatable===void 0?r[a.name]={id:a.id,value:a.value,description:a.description}:(r[a.name]instanceof Array||(r[a.name]=[{id:r[a.name].id,value:r[a.name].value,description:r[a.name].description}]),r[a.name].push({id:a.id,value:a.value,description:a.description}))),n+=Xo+u}return r}function Td(t,e,n,i,r){if(bd(t,e))return{tag:null,tagSize:0};let a=t.getUint16(e+1),u=t.getUint16(e+3);if(!r&&!ue.iptc[a])return{tag:void 0,tagSize:u};let c=Ad(t,e+Xo,u),d={id:a,name:Fd(ue.iptc[a],a,c),value:c,description:vd(ue.iptc[a],c,n,i)};return Nd(a)&&(d.repeatable=!0),wd(a)&&(d.encoding=ue.iptc[a].encoding_name(c)),{tag:d,tagSize:u}}function bd(t,e){return t.getUint8(e)!==28}function Ad(t,e,n){let i=[];for(let r=0;r<n;r++)i.push(t.getUint8(e+r));return i}function Fd(t,e,n){return t?Dd(t)?t:Pd(t)?t.name(n):t.name:`undefined-${e}`}function Dd(t){return typeof t=="string"}function Pd(t){return typeof t.name=="function"}function vd(t,e,n,i){if(Md(t))try{return t.description(e,n)}catch{}return Od(t,e)?Nn.decode(i,e):e}function Od(t,e){return t&&e instanceof Array}function Md(t){return t&&t.description!==void 0}function Nd(t){return ue.iptc[t]&&ue.iptc[t].repeatable}function wd(t){return ue.iptc[t]&&ue.iptc[t].encoding_name!==void 0}l();l();var Mt={"tiff:Orientation"(t){return t==="1"?"Horizontal (normal)":t==="2"?"Mirror horizontal":t==="3"?"Rotate 180":t==="4"?"Mirror vertical":t==="5"?"Mirror horizontal and rotate 270 CW":t==="6"?"Rotate 90 CW":t==="7"?"Mirror horizontal and rotate 90 CW":t==="8"?"Rotate 270 CW":t},"tiff:ResolutionUnit":t=>x.ResolutionUnit(parseInt(t,10)),"tiff:XResolution":t=>at(x.XResolution,t),"tiff:YResolution":t=>at(x.YResolution,t),"exif:ApertureValue":t=>at(x.ApertureValue,t),"exif:GPSLatitude":Zo,"exif:GPSLongitude":Zo,"exif:FNumber":t=>at(x.FNumber,t),"exif:FocalLength":t=>at(x.FocalLength,t),"exif:FocalPlaneResolutionUnit":t=>x.FocalPlaneResolutionUnit(parseInt(t,10)),"exif:ColorSpace":t=>x.ColorSpace(Ud(t)),"exif:ComponentsConfiguration"(t,e){if(/^\d, \d, \d, \d$/.test(e)){let n=e.split(", ").map(i=>i.charCodeAt(0));return x.ComponentsConfiguration(n)}return e},"exif:Contrast":t=>x.Contrast(parseInt(t,10)),"exif:CustomRendered":t=>x.CustomRendered(parseInt(t,10)),"exif:ExposureMode":t=>x.ExposureMode(parseInt(t,10)),"exif:ExposureProgram":t=>x.ExposureProgram(parseInt(t,10)),"exif:ExposureTime"(t){return $o(t)?x.ExposureTime(t.split("/").map(e=>parseInt(e,10))):t},"exif:MeteringMode":t=>x.MeteringMode(parseInt(t,10)),"exif:Saturation":t=>x.Saturation(parseInt(t,10)),"exif:SceneCaptureType":t=>x.SceneCaptureType(parseInt(t,10)),"exif:Sharpness":t=>x.Sharpness(parseInt(t,10)),"exif:ShutterSpeedValue":t=>at(x.ShutterSpeedValue,t),"exif:WhiteBalance":t=>x.WhiteBalance(parseInt(t,10))};function at(t,e){return $o(e)?t(e.split("/")):e}function Ud(t){return t.substring(0,2)==="0x"?parseInt(t.substring(2),16):parseInt(t,10)}function $o(t){return/^-?\d+\/-?\d+$/.test(t)}function Zo(t){let[e,n]=t.split(",");if(e!==void 0&&n!==void 0){let i=parseFloat(e),r=parseFloat(n),s=n.charAt(n.length-1);if(!Number.isNaN(i)&&!Number.isNaN(r))return""+(i+r/60)+s}return t}l();var Yo={get:Rd};function Rd(){if(typeof DOMParser<"u")return new DOMParser;try{return new(__non_webpack_require__("@xmldom/xmldom")).DOMParser({errorHandler:{error:()=>{throw new Error("Faulty XML")}}})}catch{return}}var or={read:kd};function kd(t,e){let n={};if(typeof t=="string")return wn(n,t),n;let[i,r]=Ld(t,e),s=wn(n,i);if(r){let o=wn(n,r);!s&&!o&&(delete n._raw,wn(n,sr(t,e)))}return n}function Ld(t,e){if(e.length===0)return[];let n=[sr(t,e.slice(0,1))];return e.length>1&&n.push(sr(t,e.slice(1))),n}function sr(t,e){let n=e.reduce((s,o)=>s+o.length,0),i=new Uint8Array(n),r=0;for(let s=0;s<e.length;s++){let o=e[s],a=t.buffer.slice(o.dataOffset,o.dataOffset+o.length);i.set(new Uint8Array(a),r),r+=o.length}return new DataView(i.buffer)}function wn(t,e){try{let{doc:n,raw:i}=Bd(e);t._raw=(t._raw||"")+i;let r=Ko(n);return _(t,qo(Jo(r,!0))),!0}catch{return!1}}function Bd(t){let e=Yo.get();if(!e)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;let n=typeof t=="string"?t:E(t,0,t.byteLength),i=e.parseFromString(Gd(n),"application/xml");if(i.documentElement.nodeName==="parsererror")throw new Error(i.documentElement.textContent);return{doc:i,raw:n}}function Gd(t){return t.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function Ko(t){for(let e=0;e<t.childNodes.length;e++){if(t.childNodes[e].tagName==="x:xmpmeta")return Ko(t.childNodes[e]);if(t.childNodes[e].tagName==="rdf:RDF")return t.childNodes[e]}throw new Error}function Jo(t,e=!1){let n=Vd(t);return Hd(n)?e?{}:jd(n[0]):zd(n)}function Vd(t){let e=[];for(let n=0;n<t.childNodes.length;n++)e.push(t.childNodes[n]);return e}function Hd(t){return t.length===1&&t[0].nodeName==="#text"}function jd(t){return t.nodeValue}function zd(t){let e={};return t.forEach(n=>{if(Wd(n)){let i=Xd(n);e[n.nodeName]!==void 0?(Array.isArray(e[n.nodeName])||(e[n.nodeName]=[e[n.nodeName]]),e[n.nodeName].push(i)):e[n.nodeName]=i}}),e}function Wd(t){return t.nodeName&&t.nodeName!=="#text"}function Xd(t){return{attributes:Zd(t),value:Jo(t)}}function Zd(t){let e={};for(let n=0;n<t.attributes.length;n++)e[t.attributes[n].nodeName]=decodeURIComponent(escape(t.attributes[n].value));return e}function qo(t){let e={};if(typeof t=="string")return t;for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]),i.forEach(r=>{_(e,ar(r.attributes)),typeof r.value=="object"&&_(e,Qo(r.value))})}return e}function ar(t){let e={};for(let n in t)try{$d(n)&&(e[Rn(n)]={value:t[n],attributes:{},description:le(t[n],n)})}catch{}return e}function $d(t){return t!=="rdf:parseType"&&!Un(t)}function Un(t){return t.split(":")[0]==="xmlns"}function Rn(t){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(t)?"RatingPercent":t.split(":")[1]}function le(t,e=void 0){if(Array.isArray(t)){let n=Yd(t);return e&&typeof Mt[e]=="function"?Mt[e](t,n):n}if(typeof t=="object")return Kd(t);try{return e&&typeof Mt[e]=="function"?Mt[e](t):decodeURIComponent(escape(t))}catch{return t}}function Yd(t){return t.map(e=>e.value!==void 0?le(e.value):le(e)).join(", ")}function Kd(t){let e=[];for(let n in t)e.push(`${Jd(n)}: ${le(t[n].value)}`);return e.join("; ")}function Jd(t){return t==="CiAdrCity"?"CreatorCity":t==="CiAdrCtry"?"CreatorCountry":t==="CiAdrExtadr"?"CreatorAddress":t==="CiAdrPcode"?"CreatorPostalCode":t==="CiAdrRegion"?"CreatorRegion":t==="CiEmailWork"?"CreatorWorkEmail":t==="CiTelWork"?"CreatorWorkPhone":t==="CiUrlWork"?"CreatorWorkUrl":t}function Qo(t){let e={};for(let n in t)try{Un(n)||(e[Rn(n)]=qd(t[n],n))}catch{}return e}function qd(t,e){return ef(t)?tf(t,e):Qd(t)?{value:"",attributes:{},description:""}:ea(t)?ta(t,e):na(t)?ia(t,e):ra(t)?sa(t,e):sf(t)?of(t,e):ur(t,e)}function Qd(t){return t.attributes["rdf:parseType"]==="Resource"&&typeof t.value=="string"&&t.value.trim()===""}function ef(t){return Array.isArray(t)}function tf(t,e){return ur(t[t.length-1],e)}function ea(t){return t.attributes["rdf:parseType"]==="Resource"&&t.value["rdf:value"]!==void 0||t.value["rdf:Description"]!==void 0&&t.value["rdf:Description"].value["rdf:value"]!==void 0}function ta(t,e){let n=Nt(t);t.value["rdf:Description"]!==void 0&&(t=t.value["rdf:Description"]),_(n,Nt(t),nf(t));let i=rf(t);return{value:i,attributes:n,description:le(i,e)}}function Nt(t){let e={};for(let n in t.attributes)n!=="rdf:parseType"&&n!=="rdf:resource"&&!Un(n)&&(e[Rn(n)]=t.attributes[n]);return e}function nf(t){let e={};for(let n in t.value)n!=="rdf:value"&&!Un(n)&&(e[Rn(n)]=t.value[n].value);return e}function rf(t){return aa(t.value["rdf:value"])||t.value["rdf:value"].value}function na(t){return t.attributes["rdf:parseType"]==="Resource"||t.value["rdf:Description"]!==void 0&&t.value["rdf:Description"].value["rdf:value"]===void 0}function ia(t,e){let n={value:{},attributes:{}};return t.value["rdf:Description"]!==void 0&&(_(n.value,ar(t.value["rdf:Description"].attributes)),_(n.attributes,Nt(t)),t=t.value["rdf:Description"]),_(n.value,Qo(t.value)),n.description=le(n.value,e),n}function ra(t){return Object.keys(t.value).length===0&&t.attributes["xml:lang"]===void 0&&t.attributes["rdf:resource"]===void 0}function sa(t,e){let n=ar(t.attributes);return{value:n,attributes:{},description:le(n,e)}}function sf(t){return oa(t.value)!==void 0}function oa(t){return t["rdf:Bag"]||t["rdf:Seq"]||t["rdf:Alt"]}function of(t,e){let n=oa(t.value).value["rdf:li"],i=Nt(t),r=[];return n===void 0?n=[]:Array.isArray(n)||(n=[n]),n.forEach(s=>{r.push(af(s))}),{value:r,attributes:i,description:le(r,e)}}function af(t){return ea(t)?ta(t):na(t)?ia(t).value:ra(t)?sa(t).value:ur(t)}function ur(t,e){let n=aa(t)||qo(t.value);return{value:n,attributes:Nt(t),description:le(n,e)}}function aa(t){return t.attributes&&t.attributes["rdf:resource"]}l();l();var ce={CLOSED_SUBPATH_LENGTH:0,CLOSED_SUBPATH_BEZIER_LINKED:1,CLOSED_SUBPATH_BEZIER_UNLINKED:2,OPEN_SUBPATH_LENGTH:3,OPEN_SUBPATH_BEZIER_LINKED:4,OPEN_SUBPATH_BEZIER_UNLINKED:5,FILL_RULE:6,CLIPBOARD:7,INITIAL_FILL_RULE:8},ua=24,Ln={2e3:{name:"PathInformation",description:uf},2999:{name:"ClippingPathName",description(t){let[,e]=In(t,0);return e}}};function uf(t){let n={},i=[];for(let r=0;r<t.byteLength;r+=2+ua){let s=f.getShortAt(t,r);lr[s]&&(n[s]||(n[s]=lr[s].description),i.push({type:s,path:lr[s].path(t,r+2)}))}return JSON.stringify({types:n,paths:i})}var lr={[ce.CLOSED_SUBPATH_LENGTH]:{description:"Closed subpath length",path:(t,e)=>[f.getShortAt(t,e)]},[ce.CLOSED_SUBPATH_BEZIER_LINKED]:{description:"Closed subpath Bezier knot, linked",path:kn},[ce.CLOSED_SUBPATH_BEZIER_UNLINKED]:{description:"Closed subpath Bezier knot, unlinked",path:kn},[ce.OPEN_SUBPATH_LENGTH]:{description:"Open subpath length",path:(t,e)=>[f.getShortAt(t,e)]},[ce.OPEN_SUBPATH_BEZIER_LINKED]:{description:"Open subpath Bezier knot, linked",path:kn},[ce.OPEN_SUBPATH_BEZIER_UNLINKED]:{description:"Open subpath Bezier knot, unlinked",path:kn},[ce.FILL_RULE]:{description:"Path fill rule",path:()=>[]},[ce.INITIAL_FILL_RULE]:{description:"Initial fill rule",path:(t,e)=>[f.getShortAt(t,e)]},[ce.CLIPBOARD]:{description:"Clipboard",path:cf}};function kn(t,e){let i=[];for(let r=0;r<ua;r+=8)i.push(lf(t,e+r));return i}function lf(t,e){let n=ke(t,e,8);return[ke(t,e+4,8),n]}function cf(t,e){return[[ke(t,e,8),ke(t,e+4,8),ke(t,e+8,8),ke(t,e+12,8)],ke(t,e+16,8)]}function ke(t,e,n){let i=f.getLongAt(t,e),r=i>>>31?-1:1,s=(i&2130706432)>>>32-n,o=i&parseInt(vi("1",32-n),2);return r*ro(s.toString(2)+"."+io(o.toString(2),32-n,"0"),2)}var ca={read:hf},da="8BIM",df=2,ff=4,la=da.length;function hf(t,e){let n=Pi(new Uint8Array(t).buffer),i={},r=0;for(;r<t.length;){let s=E(n,r,la);r+=la;let o=f.getShortAt(n,r);r+=df;let{tagName:a,tagNameSize:u}=pf(n,r);r+=u;let c=f.getLongAt(n,r);if(r+=ff,s===da){let d=Pi(n.buffer,r,c),h={id:o,value:E(d,0,c)};if(Ln[o]){try{h.description=Ln[o].description(d)}catch{h.description="<no description formatter>"}i[a||Ln[o].name]=h}else e&&(i[`undefined-${o}`]=h)}r+=c+c%2}return i}function pf(t,e){let[n,i]=In(t,e);return{tagName:i,tagNameSize:1+n+(n%2===0?1:0)}}l();l();var dr={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},fr={4:{name:"Preferred CMM type",value:(t,e)=>E(t,e,4),description:t=>t!==null?cr(t):""},8:{name:"Profile Version",value:(t,e)=>t.getUint8(e).toString(10)+"."+(t.getUint8(e+1)>>4).toString(10)+"."+(t.getUint8(e+1)%16).toString(10)},12:{name:"Profile/Device class",value:(t,e)=>E(t,e,4),description:t=>{switch(t.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return t}}},16:{name:"Color Space",value:(t,e)=>E(t,e,4)},20:{name:"Connection Space",value:(t,e)=>E(t,e,4)},24:{name:"ICC Profile Date",value:(t,e)=>gf(t,e).toISOString()},36:{name:"ICC Signature",value:(t,e)=>mf(t.buffer.slice(e,e+4))},40:{name:"Primary Platform",value:(t,e)=>E(t,e,4),description:t=>cr(t)},48:{name:"Device Manufacturer",value:(t,e)=>E(t,e,4),description:t=>cr(t)},52:{name:"Device Model Number",value:(t,e)=>E(t,e,4)},64:{name:"Rendering Intent",value:(t,e)=>t.getUint32(e),description:t=>{switch(t){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return t}}},80:{name:"Profile Creator",value:(t,e)=>E(t,e,4)}};function gf(t,e){let n=t.getUint16(e),i=t.getUint16(e+2)-1,r=t.getUint16(e+4),s=t.getUint16(e+6),o=t.getUint16(e+8),a=t.getUint16(e+10);return new Date(Date.UTC(n,i,r,s,o,a))}function mf(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function cr(t){switch(t.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return t}}var hr={read:bf},Sf=84,yf=128,Cf="acsp",Ef="desc",If="mluc",xf="text",_f="sig ",Tf=12;function bf(t,e,n){return n&&e[0].compressionMethod!==it?Af(t,e):Df(t,e)}function Af(t,e){if(!Ff(e[0].compressionMethod))return{};let n=new DataView(t.buffer.slice(e[0].offset,e[0].offset+e[0].length));return Tn(n,e[0].compressionMethod,"utf-8","dataview").then(fa).catch(()=>({}))}function Ff(t){return t===Oi}function Df(t,e){try{let n=e.reduce((o,a)=>o+a.length,0),i=new Uint8Array(n),r=0,s=Pf(t);for(let o=1;o<=e.length;o++){let a=e.find(d=>d.chunkNumber===o);if(!a)throw new Error(`ICC chunk ${o} not found`);let u=s.slice(a.offset,a.offset+a.length),c=new Uint8Array(u);i.set(c,r),r+=c.length}return fa(new DataView(i.buffer))}catch{return{}}}function Pf(t){return Array.isArray(t)?new DataView(Uint8Array.from(t).buffer).buffer:t.buffer}function vf(t){return t.length<yf+4}function Of(t,e){return t.length<e+Tf}function fa(t){let e=t.buffer,n=t.getUint32();if(t.byteLength!==n)throw new Error("ICC profile length not matching");if(t.length<Sf)throw new Error("ICC profile too short");let i={},r=Object.keys(fr);for(let u=0;u<r.length;u++){let c=r[u],d=fr[c],h=d.value(t,parseInt(c,10)),m=h;d.description&&(m=d.description(h)),i[d.name]={value:h,description:m}}if(Bn(e.slice(36,40))!==Cf)throw new Error("ICC profile: missing signature");if(vf(e))return i;let o=t.getUint32(128),a=132;for(let u=0;u<o;u++){if(Of(e,a))return i;let c=E(t,a,4),d=t.getUint32(a+4),h=t.getUint32(a+8);if(d>e.length)return i;let m=E(t,d,4);if(m===Ef){let C=t.getUint32(d+8);if(C>h)return i;let T=Bn(e.slice(d+12,d+C+11));wt(i,c,T)}else if(m===If){let C=t.getUint32(d+8),T=t.getUint32(d+12),M=d+16,L=[];for(let z=0;z<C;z++){let J=E(t,M+0,2),Ut=E(t,M+2,2),Rt=t.getUint32(M+4),kt=t.getUint32(M+8),Lt=to(t,d+kt,Rt);L.push({languageCode:J,countryCode:Ut,text:Lt}),M+=T}if(C===1)wt(i,c,L[0].text);else{let z={};for(let J=0;J<L.length;J++)z[`${L[J].languageCode}-${L[J].countryCode}`]=L[J].text;wt(i,c,z)}}else if(m===xf){let C=Bn(e.slice(d+8,d+h-7));wt(i,c,C)}else if(m===_f){let C=Bn(e.slice(d+8,d+12));wt(i,c,C)}a=a+12}return i}function Bn(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function wt(t,e,n){dr[e]?t[dr[e].name]={value:n,description:n}:t[e]={value:n,description:n}}l();var ha={read:Mf};function Mf(t,e){return{"Image Width":Nf(t,e),"Image Height":wf(t,e),"Bit Depth":Uf(t,e),"Color Type":Rf(t,e),Compression:kf(t,e),Filter:Lf(t,e),Interlace:Bf(t,e)}}function Nf(t,e){if(e+0+4>t.byteLength)return;let r=f.getLongAt(t,e);return{value:r,description:`${r}px`}}function wf(t,e){if(e+4+4>t.byteLength)return;let r=f.getLongAt(t,e+4);return{value:r,description:`${r}px`}}function Uf(t,e){if(e+8+1>t.byteLength)return;let r=f.getByteAt(t,e+8);return{value:r,description:`${r}`}}function Rf(t,e){let r={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(e+9+1>t.byteLength)return;let s=f.getByteAt(t,e+9);return{value:s,description:r[s]||"Unknown"}}function kf(t,e){if(e+10+1>t.byteLength)return;let r=f.getByteAt(t,e+10);return{value:r,description:r===0?"Deflate/Inflate":"Unknown"}}function Lf(t,e){if(e+11+1>t.byteLength)return;let r=f.getByteAt(t,e+11);return{value:r,description:r===0?"Adaptive":"Unknown"}}function Bf(t,e){let r={0:"Noninterlaced",1:"Adam7 Interlace"};if(e+12+1>t.byteLength)return;let s=f.getByteAt(t,e+12);return{value:s,description:r[s]||"Unknown"}}l();var ma={read:jf},gr="STATE_KEYWORD",mr="STATE_COMPRESSION",Sr="STATE_LANG",Sa="STATE_TRANSLATED_KEYWORD",yr="STATE_TEXT",Gf=1,Vf=1,Hf=6;function jf(t,e,n,i){let r={},s=[];for(let o=0;o<e.length;o++){let{offset:a,length:u,type:c}=e[o],d=zf(t,a,u,c,n);if(d instanceof Promise)s.push(d.then(({name:h,value:m,description:C})=>{try{if(p.USE_EXIF&&Kf(h,m))return{__exif:Mn.read(ga(m),Hf,i)};if(p.USE_IPTC&&Jf(h,m))return{__iptc:Ot.read(ga(m),0,i)};if(h)return{[h]:{value:m,description:C}}}catch{}return{}}));else{let{name:h,value:m,description:C}=d;h&&(r[h]={value:m,description:C})}}return{readTags:r,readTagsPromise:s.length>0?Promise.all(s):void 0}}function zf(t,e,n,i,r){let s=[],o=[],a=[],u,c=gr,d=it;for(let m=0;m<n&&e+m<t.byteLength;m++){if(c===mr){d=Wf({type:i,dataView:t,offset:e+m}),i===Ce&&(m+=Gf),c=pa(i,c);continue}else if(c===yr){u=new DataView(t.buffer.slice(e+m,e+n));break}let C=t.getUint8(e+m);C===0?c=pa(i,c):c===gr?s.push(C):c===Sr?o.push(C):c===Sa&&a.push(C)}if(d!==it&&!r)return{};let h=Tn(u,d,Xf(i));return h instanceof Promise?h.then(m=>pr(m,i,o,s)).catch(()=>pr("<text using unknown compression>".split(""),i,o,s)):pr(h,i,o,s)}function Wf({type:t,dataView:e,offset:n}){if(t===Ce){if(e.getUint8(n)===Vf)return e.getUint8(n+1)}else if(t===Dt)return e.getUint8(n);return it}function pa(t,e){return e===gr&&[Ce,Dt].includes(t)?mr:e===mr?t===Ce?Sr:yr:e===Sr?Sa:yr}function Xf(t){return t===An||t===Dt?"latin1":"utf-8"}function pr(t,e,n,i){let r=$f(t);return{name:Zf(e,n,i),value:r,description:e===Ce?Yf(t):r}}function Zf(t,e,n){let i=ye(n);if(t===An||e.length===0)return i;let r=ye(e);return`${i} (${r})`}function $f(t){return t instanceof DataView?E(t,0,t.byteLength):t}function Yf(t){return Nn.decode("UTF-8",t)}function Kf(t,e){return t.toLowerCase()==="raw profile type exif"&&e.substring(1,5)==="exif"}function Jf(t,e){return t.toLowerCase()==="raw profile type iptc"&&e.substring(1,5)==="iptc"}function ga(t){let e=t.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/);return qf(e[2].replace(/\n/g,""))}function qf(t){let e=new DataView(new ArrayBuffer(t.length/2));for(let n=0;n<t.length;n+=2)e.setUint8(n/2,parseInt(t.substring(n,n+2),16));return e}l();var ya={read:Qf};function Qf(t,e){let n={};for(let i=0;i<e.length;i++){let r=f.getLongAt(t,e[i]+Re),s=E(t,e[i]+oe,X);s===Bi?(n["Pixels Per Unit X"]=eh(t,e[i],r),n["Pixels Per Unit Y"]=th(t,e[i],r),n["Pixel Units"]=nh(t,e[i],r)):s===Gi&&(n["Modify Date"]=ih(t,e[i],r))}return n}function eh(t,e,n){if(!Gn(t,e,n,0,4))return;let s=f.getLongAt(t,e+R+0);return{value:s,description:""+s}}function th(t,e,n){if(!Gn(t,e,n,4,4))return;let s=f.getLongAt(t,e+R+4);return{value:s,description:""+s}}function nh(t,e,n){if(!Gn(t,e,n,8,1))return;let s=f.getByteAt(t,e+R+8);return{value:s,description:s===1?"meters":"Unknown"}}function ih(t,e,n){if(!Gn(t,e,n,0,7))return;let r=f.getShortAt(t,e+R),s=f.getByteAt(t,e+R+2),o=f.getByteAt(t,e+R+3),a=f.getByteAt(t,e+R+4),u=f.getByteAt(t,e+R+5),c=f.getByteAt(t,e+R+6);return{value:[r,s,o,a,u,c],description:`${ut(r,4)}-${ut(s,2)}-${ut(o,2)} ${ut(a,2)}:${ut(u,2)}:${ut(c,2)}`}}function Gn(t,e,n,i,r){return i+r<=n&&e+R+i+r<=t.byteLength}function ut(t,e){return`${"0".repeat(e-(""+t).length)}${t}`}l();var Ea={read:oh},rh=4,sh=7;function oh(t,e){let n={},i=f.getByteAt(t,e);return n.Alpha=ah(i),n.Animation=uh(i),n.ImageWidth=Ca(t,e+rh),n.ImageHeight=Ca(t,e+sh),n}function ah(t){let e=t&16;return{value:e?1:0,description:e?"Yes":"No"}}function uh(t){let e=t&2;return{value:e?1:0,description:e?"Yes":"No"}}function Ca(t,e){let n=f.getByteAt(t,e)+256*f.getByteAt(t,e+1)+65536*f.getByteAt(t,e+2)+1;return{value:n,description:n+"px"}}l();var Ia={read:lh};function lh(t){return{"GIF Version":ch(t),"Image Width":dh(t),"Image Height":fh(t),"Global Color Map":hh(t),"Bits Per Pixel":gh(t),"Color Resolution Depth":ph(t)}}function ch(t){if(6>t.byteLength)return;let i=E(t,3,3);return{value:i,description:i}}function dh(t){if(8>t.byteLength)return;let i=t.getUint16(6,!0);return{value:i,description:`${i}px`}}function fh(t){if(10>t.byteLength)return;let i=t.getUint16(8,!0);return{value:i,description:`${i}px`}}function hh(t){if(11>t.byteLength)return;let r=(t.getUint8(10)&128)>>>7;return{value:r,description:r===1?"Yes":"No"}}function ph(t){if(11>t.byteLength)return;let r=((t.getUint8(10)&112)>>>4)+1;return{value:r,description:`${r} ${r===1?"bit":"bits"}`}}function gh(t){if(11>t.byteLength)return;let r=(t.getUint8(10)&7)+1;return{value:r,description:`${r} ${r===1?"bit":"bits"}`}}l();var mh=[6,7,99],xa={get:Sh};function Sh(t,e,n){if(yh(e)){e.type="image/jpeg";let i=n+e.JPEGInterchangeFormat.value;e.image=t.buffer.slice(i,i+e.JPEGInterchangeFormatLength.value),xn(e,"base64",function(){return _n(this.image)})}return e}function yh(t){return t&&(t.Compression===void 0||mh.includes(t.Compression.value))&&t.JPEGInterchangeFormat&&t.JPEGInterchangeFormat.value&&t.JPEGInterchangeFormatLength&&t.JPEGInterchangeFormatLength.value}l();function _a(t){this.name="MetadataMissingError",this.message=t||"No Exif data",this.stack=new Error().stack}_a.prototype=new Error;var Cr={MetadataMissingError:_a};var Fa={load:Ch,loadView:Da,errors:Cr};function Ch(t,e={}){return Eh(t)?(e.async=!0,Ih(t,e).then(n=>Er(n,e))):Dh(t)?(e.async=!0,Ph(t).then(n=>Er(n,e))):Er(t,e)}function Eh(t){return typeof t=="string"}function Ih(t,e){return/^\w+:\/\//.test(t)?typeof fetch<"u"?xh(t,e):_h(t,e):bh(t)?Promise.resolve(no(t)):Ah(t,e)}function xh(t,{length:e}={}){let n={method:"GET"};return Number.isInteger(e)&&e>=0&&(n.headers={range:`bytes=0-${e-1}`}),fetch(t,n).then(i=>i.arrayBuffer())}function _h(t,{length:e}={}){return new Promise((n,i)=>{let r={};Number.isInteger(e)&&e>=0&&(r.headers={range:`bytes=0-${e-1}`}),Th(t)(t,r,o=>{if(o.statusCode>=200&&o.statusCode<=299){let a=[];o.on("data",u=>a.push(Buffer.from(u))),o.on("error",u=>i(u)),o.on("end",()=>n(Buffer.concat(a)))}else i(`Could not fetch file: ${o.statusCode} ${o.statusMessage}`),o.resume()}).on("error",o=>i(o))})}function Th(t){return/^https:\/\//.test(t)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function bh(t){return/^data:[^;,]*(;base64)?,/.test(t)}function Ah(t,{length:e}={}){return new Promise((n,i)=>{let r=Fh();r.open(t,(s,o)=>{s?i(s):r.stat(t,(a,u)=>{if(a)i(a);else{let c=Math.min(u.size,e!==void 0?e:u.size),d=Buffer.alloc(c),h={buffer:d,length:c};r.read(o,h,m=>{m?i(m):r.close(o,C=>{C&&console.warn(`Could not close file ${t}:`,C),n(d)})})}})})})}function Fh(){try{return __non_webpack_require__("fs")}catch{return}}function Dh(t){return typeof window<"u"&&typeof File<"u"&&t instanceof File}function Ph(t){return new Promise((e,n)=>{let i=new FileReader;i.onload=r=>e(r.target.result),i.onerror=()=>n(i.error),i.readAsArrayBuffer(t)})}function Er(t,e){return vh(t)&&(t=new Uint8Array(t).buffer),Da(Oh(t),e)}function vh(t){try{return Buffer.isBuffer(t)}catch{return!1}}function Oh(t){try{return new DataView(t)}catch{return new nt(t)}}function Da(t,{expanded:e=!1,async:n=!1,includeUnknown:i=!1}={expanded:!1,async:!1,includeUnknown:!1}){let r=!1,s={},o=[],{fileType:a,fileDataOffset:u,jfifDataOffset:c,tiffHeaderOffset:d,iptcDataOffset:h,xmpChunks:m,iccChunks:C,mpfDataOffset:T,pngHeaderOffset:M,pngTextChunks:L,pngChunkOffsets:z,vp8xChunkOffset:J,gifHeaderOffset:Ut}=Ao.parseAppMarkers(t,n);if(p.USE_JPEG&&p.USE_FILE&&Mh(u)){r=!0;let g=Go.read(t,u);e?s.file=g:s=_({},s,g)}if(p.USE_JPEG&&p.USE_JFIF&&Nh(c)){r=!0;let g=Vo.read(t,c);e?s.jfif=g:s=_({},s,g)}if(p.USE_EXIF&&wh(d)){r=!0;let g=Mn.read(t,d,i);if(g.Thumbnail&&(s.Thumbnail=g.Thumbnail,delete g.Thumbnail),e?(s.exif=g,Uh(s)):s=_({},s,g),p.USE_TIFF&&p.USE_IPTC&&g["IPTC-NAA"]&&!Ta(h)){let O=Ot.read(g["IPTC-NAA"].value,0,i);e?s.iptc=O:s=_({},s,O)}if(p.USE_TIFF&&p.USE_XMP&&g.ApplicationNotes&&!ba(m)){let O=or.read(ye(g.ApplicationNotes.value));e?s.xmp=O:(delete O._raw,s=_({},s,O))}if(p.USE_PHOTOSHOP&&g.ImageSourceData){let O=ca.read(g.PhotoshopSettings.value,i);e?s.photoshop=O:s=_({},s,O)}if(p.USE_TIFF&&p.USE_ICC&&g.ICC_Profile&&!Aa(C)){let O=hr.read(g.ICC_Profile.value,[{offset:0,length:g.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);e?s.icc=O:s=_({},s,O)}}if(p.USE_JPEG&&p.USE_IPTC&&Ta(h)){r=!0;let g=Ot.read(t,h,i);e?s.iptc=g:s=_({},s,g)}if(p.USE_XMP&&ba(m)){r=!0;let g=or.read(t,m);e?s.xmp=g:(delete g._raw,s=_({},s,g))}if((p.USE_JPEG||p.USE_WEBP)&&p.USE_ICC&&Aa(C)){r=!0;let g=hr.read(t,C,n);g instanceof Promise?o.push(g.then(kt)):kt(g)}if(p.USE_MPF&&Rh(T)){r=!0;let g=Bo.read(t,T,i);e?s.mpf=g:s=_({},s,g)}if(p.USE_PNG&&p.USE_PNG_FILE&&kh(M)){r=!0;let g=ha.read(t,M);e?(s.png=s.png?_({},s.png,g):g,s.pngFile=g):s=_({},s,g)}if(p.USE_PNG&&Lh(L)){r=!0;let{readTags:g,readTagsPromise:O}=ma.read(t,L,n,i);Lt(g),O&&o.push(O.then(Le=>Le.forEach(Lt)))}if(p.USE_PNG&&Bh(z)){r=!0;let g=ya.read(t,z);e?s.png=s.png?_({},s.png,g):g:s=_({},s,g)}if(p.USE_WEBP&&Gh(J)){r=!0;let g=Ea.read(t,J);e?s.riff=s.riff?_({},s.riff,g):g:s=_({},s,g)}if(p.USE_GIF&&Vh(Ut)){r=!0;let g=Ia.read(t,Ut);e?s.gif=s.gif?_({},s.gif,g):g:s=_({},s,g)}let Rt=(p.USE_JPEG||p.USE_WEBP)&&p.USE_EXIF&&p.USE_THUMBNAIL&&xa.get(t,s.Thumbnail,d);if(Rt?(r=!0,s.Thumbnail=Rt):delete s.Thumbnail,a&&(e?(s.file||(s.file={}),s.file.FileType=a):s.FileType=a,r=!0),!r)throw new Cr.MetadataMissingError;if(n)return Promise.all(o).then(()=>s);return s;function kt(g){e?s.icc=g:s=_({},s,g)}function Lt(g){if(e){for(let O of["exif","iptc"]){let Le=`__${O}`;g[Le]&&(s[O]=s[O]?_({},s.exif,g[Le]):g[Le],delete g[Le])}s.png=s.png?_({},s.png,g):g,s.pngText=s.pngText?_({},s.png,g):g}else s=_({},s,g.__exif?g.__exif:{},g.__iptc?g.__iptc:{},g),delete s.__exif,delete s.__iptc}}function Mh(t){return t!==void 0}function Nh(t){return t!==void 0}function wh(t){return t!==void 0}function Uh(t){if(t.exif){if(t.exif.GPSLatitude&&t.exif.GPSLatitudeRef)try{t.gps=t.gps||{},t.gps.Latitude=rt(t.exif.GPSLatitude.value),t.exif.GPSLatitudeRef.value.join("")==="S"&&(t.gps.Latitude=-t.gps.Latitude)}catch{}if(t.exif.GPSLongitude&&t.exif.GPSLongitudeRef)try{t.gps=t.gps||{},t.gps.Longitude=rt(t.exif.GPSLongitude.value),t.exif.GPSLongitudeRef.value.join("")==="W"&&(t.gps.Longitude=-t.gps.Longitude)}catch{}if(t.exif.GPSAltitude&&t.exif.GPSAltitudeRef)try{t.gps=t.gps||{},t.gps.Altitude=t.exif.GPSAltitude.value[0]/t.exif.GPSAltitude.value[1],t.exif.GPSAltitudeRef.value===1&&(t.gps.Altitude=-t.gps.Altitude)}catch{}}}function Ta(t){return t!==void 0}function ba(t){return Array.isArray(t)&&t.length>0}function Aa(t){return Array.isArray(t)&&t.length>0}function Rh(t){return t!==void 0}function kh(t){return t!==void 0}function Lh(t){return t!==void 0}function Bh(t){return t!==void 0}function Gh(t){return t!==void 0}function Vh(t){return t!==void 0}function Hh(t,e){if(t&1&&(N(0,"details")(1,"summary",10),w(2," expand EXIF data "),k(),N(3,"pre",11),w(4),Xn(5,"json"),k()()),t&2){let n=ze();V(4),ht("          ",Zn(5,1,n.imageData),`
        `)}}function jh(t,e){t&1&&w(0," ...LOADING... ")}function zh(t,e){if(t&1){let n=Rr();N(0,"details")(1,"summary",10),w(2," expand EXIF data "),k(),N(3,"pre",11),w(4),Xn(5,"json"),k()(),N(6,"button",12),Ae("click",function(){vr(n);let r=ze();return Or(r.download())}),w(7,"download"),k()}if(t&2){let n=ze();V(4),ht("          ",Zn(5,1,n.newImageData),`
        `)}}function Wh(t,e){t&1&&w(0," ...LOADING... ")}var Pa=(()=>{let e=class e{constructor(i,r){this.document=i,this.formBuilder=r,this.imagesDiv=null,this.fileInput=null,this.isLoading=!1,this.form=this.formBuilder.group({watermarkText:"sample text"}),this.imagesDiv=this.document.querySelector("#images"),this.fileInput=this.document.querySelector("#upload")}fileInputOnChange(i){return S(this,null,function*(){return this.isLoading=!0,this.file=this.fileInput.files[0],this.originalImage=this.document.querySelector("#originalImage"),this.originalImage.src=yield this.fileToDataUri(this.file),this.newImage=this.document.querySelector("#watermarkedImageWithText"),this.originalImage.addEventListener("load",()=>S(this,null,function*(){return this.loadEventListener()})),this.imagesDiv.style.visibility="visible",!1})}loadEventListener(){return S(this,null,function*(){this.newImage.src=this.watermakImageWithText(this.form.get("watermarkText")?.value),this.imageData=yield Fa.load(this.file,{includeUnknown:!0}),yield eo.parse(this.newImage).then(i=>this.newImageData=i).finally(()=>this.isLoading=!1),console.log({newImageData:this.newImageData,imageData:this.imageData})})}ngOnInit(){this.fileInput&&this.fileInput.addEventListener("change",i=>S(this,null,function*(){return this.fileInputOnChange(i)}))}fileToDataUri(i){return S(this,null,function*(){return new Promise(r=>{let s=new FileReader;s.addEventListener("load",()=>S(this,null,function*(){r(s.result)})),s.readAsDataURL(i)})})}watermakImageWithText(i){let r=this.document.createElement("canvas"),s=r.getContext("2d"),o=this.originalImage.naturalWidth,a=this.originalImage.naturalHeight;if(r.width=o,r.height=a,s)return s.drawImage(this.originalImage,0,0,o,a),s.fillStyle="rgba(255, 255, 255, 0.5)",s.strokeStyle="rgba(0,0,0,0.45)",s.textBaseline="middle",s.font=this.getFontSiez(o),s.textAlign="center",s.fillText(i,o/2,a/2),s.strokeText(i,o/2,a/2),r.toDataURL("image/jpeg",.95)}getFontSiez(i){return`bold ${i*.14285714285714285}px serif`}reset(){this.form.setValue({watermarkText:""}),this.fileInput.value=null,this.imagesDiv.style.visibility="hidden",this.originalImage=null,this.newImage=null,this.imageData=null,this.newImageData=null,this.file=null}download(){let i=`${new Date().toLocaleTimeString()}-${new Date().toLocaleDateString()}`,r=this.document.createElement("a");r.setAttribute("target","_blank"),r.setAttribute("href",this.newImage.src),r.setAttribute("download",`img-${i}.jpg`),this.document.body.appendChild(r),r.click(),r.remove()}isRefreshDisabled(){return!this.file||!this.form.value.watermarkText}};e.\u0275fac=function(r){return new(r||e)(F(Vr),F(Ds))},e.\u0275cmp=Ve({type:e,selectors:[["file-uploader"]],standalone:!0,features:[We],decls:26,vars:7,consts:[[1,"flex","text-center","flex-col","items-center"],[1,"w-96",3,"formGroup"],[1,"flex","mb-8","flex-col"],["id","watermarkText","type","text","formControlName","watermarkText",1,"h-8","p-1"],["type","button",1,"disabled:opacity-65","disabled:bg-black","disabled:hover:bg-black",3,"click","disabled"],["id","upload","type","file","accept","image/*",3,"disabled"],["type","button",3,"click","disabled"],["id","images",1,"items-center","max-w-[60vw]",2,"visibility","hidden"],["id","originalImage"],["id","watermarkedImageWithText",3,"hidden"],[1,"hover:cursor-pointer"],[1,"overflow-scroll","max-h-[50vh]"],["type","reset",1,"my-4",3,"click"]],template:function(r,s){r&1&&(N(0,"div",0)(1,"h1"),w(2,"Image Watermarker and EXIF Remover"),k(),N(3,"form",1)(4,"p"),w(5," Please write your watermark text "),k(),N(6,"div",2),ie(7,"input",3),N(8,"button",4),Ae("click",function(){return s.loadEventListener()}),w(9,"refresh"),k()(),N(10,"p"),w(11," Please upload an image and a watermark will be added "),k(),ie(12,"input",5),N(13,"button",6),Ae("click",function(){return s.reset()}),w(14,"reset"),k()(),N(15,"div",7)(16,"h2"),w(17,"Original image"),k(),ie(18,"img",8),dt(19,Hh,6,3,"details")(20,jh,1,0),N(21,"h2"),w(22,"Watermarked image"),k(),ie(23,"img",9),dt(24,zh,8,3)(25,Wh,1,0),k()()),r&2&&(V(3),je("formGroup",s.form),V(5),je("disabled",s.isRefreshDisabled()),V(4),je("disabled",!s.form.value.watermarkText),V(),je("disabled",!s.form.value.watermarkText),V(6),ft(s.imageData?19:20),V(4),je("hidden",s.isLoading),V(),ft(s.isLoading?25:24))},dependencies:[jr,Hr,Ps,bs,qt,Es,Is,vs,oi,ai]});let t=e;return t})();function Xh(t,e){if(t&1&&(N(0,"strong"),w(1),k()),t&2){let n=ze();V(),kr(n.currentScreenSize)}}var va=(()=>{let e=class e{constructor(i){this.destroyed=new Be,this.currentScreenSize="",this.isDevMode=import.meta.env?.DEV,this.version="1.0.0",this.displayNameMap=new Map([[$.XSmall,"XSmall"],[$.Small,"Small"],[$.Medium,"Medium"],[$.Large,"Large"],[$.XLarge,"XLarge"]]),i.observe([$.XSmall,$.Small,$.Medium,$.Large,$.XLarge]).pipe(Bt(this.destroyed)).subscribe(r=>{for(let s of Object.keys(r.breakpoints))r.breakpoints[s]&&(this.currentScreenSize=this.displayNameMap.get(s)??"Unknown")})}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}getCopyright(){let i=new Date().getFullYear()>2010&&new Date().getFullYear();return`v${this.version} \xA9 ${i.toString()} Filipe Silva`}};e.\u0275fac=function(r){return new(r||e)(F(qr))},e.\u0275cmp=Ve({type:e,selectors:[["main-layout"]],standalone:!0,features:[We],decls:5,vars:2,consts:[[1,"my-8"]],template:function(r,s){r&1&&(N(0,"div",0),dt(1,Xh,2,1,"strong"),ie(2,"file-uploader"),N(3,"footer"),w(4),k()()),r&2&&(V(),ft(s.isDevMode?1:-1),V(3),ht(" ",s.getCopyright()," "))},dependencies:[Pa]});let t=e;return t})();var Oa=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ve({type:e,selectors:[["app-root"]],standalone:!0,features:[We],decls:1,vars:0,template:function(r,s){r&1&&ie(0,"main-layout")},dependencies:[va]});let t=e;return t})();l();l();l();var Ma=[];var Na={providers:[Br({eventCoalescing:!0}),$r(Ma),Xr()]};var Zh={providers:[Zr()]},wa=Gr(Na,Zh);var $h=()=>Wr(Oa,wa),cy=$h;export{cy as a};
